<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2022-08-15T12:46:19.146Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>セキュアなコラボレーションを実現するクロス テナント アクセス設定が一般公開されました！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/cross-tenant-access-setting-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/cross-tenant-access-setting-ga/</id>
    <published>2022-08-09T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.146Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2022 年 7 月 21 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/cross-tenant-access-settings-for-secure-collaboration-now/ba-p/3575844">Cross-tenant access settings for secure collaboration now generally available!</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>みなさん、こんにちは。 </p><p>外部コラボレーションのためのクロス テナント アクセス設定が、一般利用可能になったことをお伝えしたいと思います。セキュアなコラボレーション ポリシーを実現するためにチームが行った作業を誇りに思うと同時に、<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/collaborate-more-securely-with-new-cross-tenant-access-settings/ba-p/2147077">パブリック プレビュー</a> を実施した際に、お客様から得た知見を共有できることを嬉しく思います。</p><p>お客様からお聞きした採用事例やメインのシナリオについて、ここからはシニア プロダクト マネージャーの Josh Douglas を迎えて、話を聞きたいと思います。</p><hr><p>Robin、ありがとう! クロス テナント アクセス設定と一般提供までの道のりについて、皆さんに詳しくお話できることをうれしく思います。パブリック プレビューでは、多くのお客様がクロス テナント アクセス設定を採用し、以前は不可能だったシナリオや要件に対応されています。このことを説明するために、まずは以下の情報を紹介します。</p><ul><li>5,000 以上のテナントが、他の組織のために MFA の信頼を設定しました。</li><li>2,000 以上のテナントが、準拠済みもしくは Azure AD 参加デバイスの信頼関係を構成しました。</li></ul><p>これらの統計は、この機能によって、従来は不可能だった組織外のコラボレーションのセキュリティ確保が可能になるという、皆様からの素晴らしいフィードバックに沿うものです。</p><h2 id="セキュアなコラボレーションを実現しながら外部ユーザーとスムーズに連携する"><a href="#セキュアなコラボレーションを実現しながら外部ユーザーとスムーズに連携する" class="headerlink" title="セキュアなコラボレーションを実現しながら外部ユーザーとスムーズに連携する"></a>セキュアなコラボレーションを実現しながら外部ユーザーとスムーズに連携する</h2><p>外部ユーザーの MFA 登録を管理することで、追加作業が発生し、サポート コストが増加するという声が聞かれます。さらにユーザーは、コラボレーションする異なる組織間で、時には複数回、登録と MFA を実行しなければならず負担を感じていました。受信方向のクロス テナント アクセス設定では、外部の Azure AD 組織からの MFA のセキュリティ クレームを信頼し、条件付きアクセス ポリシーで MFA が要求された場合に、外部ユーザーがホーム テナントで MFA を実行するようにするお客様が多くなっています。これにより、ユーザーは別のテナントのリソースにアクセスする際に 2 回目の MFA を実行する必要がなくなり、ユーザーにとっての負担が大幅に軽減されます。これにより、組織で要求されるセキュリティ体制を維持しながら、外部ユーザーの MFA 登録を管理する必要がなくなり、サポート コストを削減することができます。また、組織で発生する MFA コストも削減できます。</p><p>さらに、外部ユーザーがアプリやリソースにアクセスするデバイスの種類を懸念しているお客様もいらっしゃいました。条件付きアクセス ポリシーを適用して、外部ユーザーが準拠済みデバイスまたはハイブリッド Azure AD 参加ドメインでリソースにアクセスすることを要求することが、受信方向のクロス テナント アクセス設定で可能になりました。外部 AD 組織からのデバイス クレームを信頼することで、管理されたデバイスで外部ユーザーがアプリやリソースにアクセスしていることがわかり、データをさらに保護することができます。 </p><p>詳細は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/authentication-conditional-access">External Identities の認証と条件付きアクセス</a> をご覧ください。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-setting-ga/cross-tenant-access-setting-ga1.png" alt="特定の外部組織から、多要素認証、コンプライアンス、ハイブリッドAzure ADに参加したデバイスを信頼する。"></p><h2 id="ユーザーが承認した外部組織とのみコラボレートするようにする"><a href="#ユーザーが承認した外部組織とのみコラボレートするようにする" class="headerlink" title="ユーザーが承認した外部組織とのみコラボレートするようにする"></a>ユーザーが承認した外部組織とのみコラボレートするようにする</h2><p>アプリやリソースを外部からの不正アクセスから保護することが重要であるのと同様に、ユーザーが承認した組織としかコラボレーションしていないことを確認することも重要な場合があります。例えば、規制の強い業界に属し、データの流出について非常に敏感になっている組織があげられます。教育機関では、学生が学校のアカウントを使用して、許可されていない外部組織と Teams 上でチャットしている可能性もあります。このようなシナリオでは、ユーザーが未承認の外部テナントにアクセスするのをブロックする、送信方向のクロス テナント アクセス設定を導入することができます。教育業界のあるお客様は、ポリシーのテストと導入に 5 分もかからなかったそうです。これによりシンプルなセキュリティが実現できます。</p><p>詳細は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/cross-tenant-access-settings-b2b-collaboration#modify-outbound-access-settings">送信アクセス設定を変更する</a> ご覧ください。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-setting-ga/cross-tenant-access-setting-ga2.png" alt="ユーザーのグループをターゲットにして、特定の組織への送信アクセスをブロックする。"></p><p><img src="/blog/azure-active-directory/cross-tenant-access-setting-ga/cross-tenant-access-setting-ga3.png" alt="同じグループのユーザーが、送信アクセス時に、どのアプリケーションにもアクセスできないようにブロックする。"></p><h2 id="Teams-の共有チャンネルでシームレスなコラボレーションを実現"><a href="#Teams-の共有チャンネルでシームレスなコラボレーションを実現" class="headerlink" title="Teams の共有チャンネルでシームレスなコラボレーションを実現"></a>Teams の共有チャンネルでシームレスなコラボレーションを実現</h2><p>Teams や SharePoint 上で、外部ユーザーとのコラボレーションを主に行っている場合、<a href="https://docs.microsoft.com/ja-jp/MicrosoftTeams/shared-channels">Teams 共有チャネル</a> にて、複数の組織のユーザーと同時にチャットやファイル共有、コラボレーションを行うことができるシームレスなコラボレーションが可能です。上記で説明した受信および送信方向のクロス テナント アクセス ポリシーは、Teams 共有チャネルの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/b2b-direct-connect-overview">B2B 直接接続</a> ユーザーにも適用されます。 </p><p><img src="/blog/azure-active-directory/cross-tenant-access-setting-ga/cross-tenant-access-setting-ga4.png" alt="共有チャネルは、ユーザーがテナントを切り替えることなく、シームレスなコラボレーションを実現する。"></p><h2 id="お客様の声"><a href="#お客様の声" class="headerlink" title="お客様の声"></a>お客様の声</h2><p>パブリック プレビュー期間中、多くのお客様が上記の機能を試され、次のような感想を述べられています。 </p><blockquote><p>“クロス テナント アクセス設定は、外部組織とのコラボレーションを確保するために必要なコントロールを提供し、自社の保有財産を超えた「ゼロ トラスト」の道のりをサポートしてくれます。”<br>– 保険業界のお客様からの声</p></blockquote><blockquote><p>“Azure AD B2B により、当社のビジネスとパートナーや顧客との連携、サービスや製品へのアクセスを提供する方法が変革されました。クロス テナント アクセス設定は、より詳細で相互に合意可能なレベルの制御を実装する機能を提供することで、ビジネスを次のレベルへと押し上げました。これは多くのお客様からの重要な要望であり、両者が妥協することなく、データ保護要件を満たすために必要な制御を実施することが可能になります。”<br>– プロフェッショナルサービス業界のお客様からの声</p></blockquote><blockquote><p>“これらの機能により、セキュリティ管理が強化されるとともに、管理されたエンドポイント デバイスから外部テナントへのログインを強制できるようになるため、クロス テナント アクセスに非常に期待しています。クロス テナント アクセスは、リスクを大幅に削減し、セキュリティを向上させ、外部テナントへのアクセスやコラボレーションのニーズに関して、ビジネスをより良くサポートするのに役立っています。セキュリティ部門、ビジネス、そして重要なことですが、監査役や規制当局もこの機能に満足しています。”<br>– 金融サービス業界のお客様 </p></blockquote><h2 id="これはほんの始まりに過ぎません…"><a href="#これはほんの始まりに過ぎません…" class="headerlink" title="これはほんの始まりに過ぎません…"></a>これはほんの始まりに過ぎません…</h2><p>みなさまもぜひクロス テナント アクセス設定をお使いいただければと思います。この設定を始める前に、外部組織とのコラボレーションを評価し、必要なコラボレーションを不注意で阻害することがないように、この <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/workbook-cross-tenant-access-activity">ワークブック</a> を活用ください。受信および送信方向のコラボレーション状況を把握できるよう、シンプルに構成されています。</p><p>この製品をどのように使用しているか、または今後どのようにすればより良くなるかについてのフィードバックをお待ちしています。Azure フォーラムや Twitter の @AzureAD タグでフィードバックを共有ください。 </p><p>Robin &amp; Josh<br>Twitter: RobinGo_MS, @joshkdouglas</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2022 年 7 月 21 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー- My Apps の強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/publicpreview-myapps/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/publicpreview-myapps/</id>
    <published>2022-08-08T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.434Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2021 年 11 月15 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/public-preview-enhanced-quot-my-apps-quot-experience/ba-p/3118022">Public Preview: Enhanced “My Apps” experience</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><p>Microsoft Entra のエンド ツー エンドの機能を拡張し続けている私たちは、強力なアイデンティティとアクセス管理の実装が、組織とそのすべての人々の生産性を向上させるはずだと固く信じています。安全なアクセスは、ユーザーにとって、可能な限り摩擦のないものでなければなりません。</p><p>お客様のようなお客様からのフィードバックにより、私たちは <a href="https://myapps.microsoft.com/">My Apps ポータル</a> に大幅な機能強化を提供しています。今週、パブリックプレビューを開始し、すべての Azure Active Directory (Azure AD) ユーザーが <a href="https://myapps.microsoft.com/">myapps.microsoft.com</a> で利用できます。</p><h2 id="日常業務のスタート地点"><a href="#日常業務のスタート地点" class="headerlink" title="日常業務のスタート地点"></a>日常業務のスタート地点</h2><p>My Appsは、必要なアプリケーションに迅速かつ安全にアクセスできるようにします。ユーザーは、自分がアクセスできるアプリケーションを発見して起動できるため、このポータルは、あらゆるタスクの出発点となることでしょう。<br><img src="/blog/azure-active-directory/publicpreview-myapps/publicpreview-myapps1.png"></p><h2 id="より使いやすくなりました"><a href="#より使いやすくなりました" class="headerlink" title="より使いやすくなりました"></a>より使いやすくなりました</h2><p>新しいビューは、より使いやすく、レスポンシブで、アクセスしやすくなっています。同じスペースにより多くのアプリが表示され、コレクション（アプリのグループ）間を移動するために、クリックする代わりにスクロールすることができます。特に複数のコレクションを使用する場合、大型モニターからモバイル デバイスまで、より適切に拡大縮小されます。これらにより、My Apps がマウス、タッチ スクリーン、スクリーン リーダー、キーボードのいずれのナビゲーションで使用されている場合でも、ユーザーがアプリケーションを見つけて起動するのがより簡単かつ迅速になります。</p><p><img src="/blog/azure-active-directory/publicpreview-myapps/publicpreview-myapps2.png"></p><p><img src="/blog/azure-active-directory/publicpreview-myapps/publicpreview-myapps3.png"></p><p>さらに、各コレクションは個別に折りたたむことができ、ナビゲーションが容易になります。また、関連する設定ボタンがあり、コレクションの非表示など、関連するアクションを簡単に見つけることができます。</p><h2 id="パブリック-プレビューを今すぐ体験"><a href="#パブリック-プレビューを今すぐ体験" class="headerlink" title="パブリック プレビューを今すぐ体験"></a>パブリック プレビューを今すぐ体験</h2><p>ユーザーは、ヘッダーの「Try the preview」ボタンを選択することでプレビューに参加でき、「Return to previous view」ボタンを選択することで以前のビューに戻ることができます。なお、今回のプレビューでは、ドラッグ＆ドロップは使用できませんが、一般公開までに追加される予定です。</p><p><img src="/blog/azure-active-directory/publicpreview-myapps/publicpreview-myapps4.png"></p><p>改善された <a href="https://myapps.microsoft.com/">My Apps</a> の体験を今すぐお試しいただき、主要なステーク ホルダーやユーザーと共有してください。</p><h2 id="念のため、My-Appsにサイトを追加する手順"><a href="#念のため、My-Appsにサイトを追加する手順" class="headerlink" title="念のため、My Appsにサイトを追加する手順"></a>念のため、My Appsにサイトを追加する手順</h2><p>My Apps では、ユーザーが Web サイトへのリンクを作成できるようになったため、関連するすべてのアプリとサイトにアクセスできるようになりました。Azure AD とまだ統合されていない Web サイトを頻繁に訪問する場合、簡単なリンクを作成することで追加することができます。サイトを作成するには、「サイトの追加」をクリックし、名前と URL を入力します。</p><p><img src="/blog/azure-active-directory/publicpreview-myapps/publicpreview-myapps5.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2021 年 11 月15 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>外部コラボレーションの設定 (ゲスト ユーザーのアクセス制限) について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/external-collaboration-setting-b2b-access/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/external-collaboration-setting-b2b-access/</id>
    <published>2022-08-01T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.170Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure ID チームの小出です。</p><p>今回は、外部コラボレーションの設定で指定できる、ゲスト ユーザーのアクセス制限についてご紹介します。</p><p>Azure ポータルには、招待されたゲスト ユーザーがどのような情報にアクセスできるか・できないかを制御する設定項目があります。<br>具体的には、下記画面の [ゲスト ユーザーのアクセス制限] の 3 つの選択肢で、ゲストがアクセスできる範囲を指定できます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access1.png"></p><p>この設定については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/external-identities/external-collaboration-settings-configure">外部コラボレーションの設定を構成する</a> にて詳細を確認することができますが、各選択肢について、具体的にどのような違いがあるのか分からない・詳細を教えてほしいというお問い合わせを多くいただいております。</p><p>そのため今回は、それぞれの選択肢を指定した際、ゲスト ユーザー側から見ると、どのような変化があるかを、画面ショット付きでご案内します。</p><p>詳細は<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/users-default-permissions">公開情報</a>に記載の通り、ゲスト ユーザーとメンバー ユーザーでは、既定で持っているアクセス権が異なりますが、この設定に変更すると、ゲスト ユーザーは、テナントにいる「管理者ロールを持たないメンバー ユーザー」と同じアクセス権を持つようになります。</p><p>具体的には、ゲスト ユーザーはたとえば下記画面のように、[ロールと管理者]、[管理単位]、[ライセンス]、[Azure AD Connect] などの情報を確認することができます。</p><p>※[ユーザー]、[グループ] で確認できる情報については、「管理者ロールを持たないメンバー ユーザー」と同じアクセス権で確認できる情報と同じです。詳細な記載は省略しますが、ユーザー一覧・グループ一覧を確認できます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access2.png"></p><h1 id="ゲスト-ユーザーは、ディレクトリ-オブジェクトのプロパティとメンバーシップへのアクセスが制限されます-を選択した場合"><a href="#ゲスト-ユーザーは、ディレクトリ-オブジェクトのプロパティとメンバーシップへのアクセスが制限されます-を選択した場合" class="headerlink" title="[ゲスト ユーザーは、ディレクトリ オブジェクトのプロパティとメンバーシップへのアクセスが制限されます] を選択した場合"></a>[ゲスト ユーザーは、ディレクトリ オブジェクトのプロパティとメンバーシップへのアクセスが制限されます] を選択した場合</h1><p>既定の設定です。ゲスト ユーザーは、メンバー ユーザーと同じアクセス権を持たず、一部閲覧できない項目があります。</p><p>たとえば、メンバー ユーザーと異なり、[ユーザー] の画面にて、ユーザー一覧が表示されません。以下のようにメッセージが表示されます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access3.png"></p><p>ただし、任意のユーザーの ObjectID を入力することができれば、ほかのユーザーの詳細を確認することができます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access4.png"></p><p>グループにつきましては、ユーザー一覧のように検索ボックスは表示されず、以下のように “この操作を完了するのに十分な特権がありません。” とのエラー メッセージが表示されます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access5.png"></p><p>しかし、ユーザーと同様、Azure ポータル - [Azure Active Directory] - [グループ] のブレードにアクセスしたときの URL をもとに、グループの ObjectID を含む URL にアクセスすると、下記のグループ詳細画面にアクセスすることが可能です。</p><p>具体的には、以下のような URL を直接指定できれば、グループの詳細を閲覧することができます。</p><p>URL 例（GroupID/ の後ろに、グループの ObjectID を指定します。）<br><a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/GroupDetailsMenuBlade/Overview/groupId/4041df9f-a919-4e9c-b9de-9cdbb1cacc19">https://portal.azure.com/#blade/Microsoft_AAD_IAM/GroupDetailsMenuBlade/Overview/groupId/4041df9f-a919-4e9c-b9de-9cdbb1cacc19</a></p><p><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access6.png"></p><p>その他、[ロールと管理者] から、誰がどの管理者ロールを持っているか確認したり、テナントに紐づいているライセンス一覧を確認したりすることはできません。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access7.png"></p><h1 id="ゲスト-ユーザーのアクセスは、各自のディレクトリ-オブジェクトのプロパティとメンバーシップに制限されます-最も制限が多い-を選択した場合"><a href="#ゲスト-ユーザーのアクセスは、各自のディレクトリ-オブジェクトのプロパティとメンバーシップに制限されます-最も制限が多い-を選択した場合" class="headerlink" title="[ゲスト ユーザーのアクセスは、各自のディレクトリ オブジェクトのプロパティとメンバーシップに制限されます (最も制限が多い)] を選択した場合"></a>[ゲスト ユーザーのアクセスは、各自のディレクトリ オブジェクトのプロパティとメンバーシップに制限されます (最も制限が多い)] を選択した場合</h1><p>ゲスト ユーザーは、自身のプロパティにアクセスすることができます。自分の名前や UPN を確認することが可能です。</p><p>しかしながら、その他のユーザーをユーザー一覧から検索したり、グループの詳細画面にアクセスしたりすることもできなくなります。（ほかのユーザーの ObjectID を入力しても検索できません。）<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access8.png"></p><p>ゲスト自身が、何らかのグループに所属しているかどうかは閲覧できますが、具体的にどのグループに所属しているのか、名前は表示されません。<br>（ObjectID のみ表示されますが、ObjectID をもとにグループを検索することもできません。）</p><p>下記画面でグループをクリックすると、”アクセス権がありません” の画面が表示されます。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access9.png"></p><p>具体的には、上記の画面で対象グループをクリックしたり、 ObjectID を含む URL に直接アクセスしても、グループの詳細は閲覧できません。下記のようなエラーとなります。<br><img src="/blog/azure-active-directory/external-collaboration-setting-b2b-access/external-collaboration-setting-b2b-access10.png"></p><p>この設定に変更すると、ゲストがアクセスできる範囲は「ゲスト ユーザー自身に関する情報のみ」とご認識いただければと思います。</p><hr><p>今回は、ゲスト ユーザーのアクセス制限の項目を設定した時に、どのような見え方となるかをご案内させていただきました。</p><p>[外部コラボレーションの設定] のほかの項目につきましても、順次本ブログにてご案内できればと考えておりますので、その際は新しい記事も併せてご覧いただければと思います。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、外部コラボレーションの設定で指定できる、ゲスト ユーザーのアクセス制限についてご紹介します。&lt;/p&gt;
&lt;p&gt;Azure ポータルには、招待されたゲスト ユーザーがどのような情報にアクセスできるか・でき</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="B2B" scheme="https://jpazureid.github.io/blog/tags/B2B/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD への認証が失敗する (エラー コード AADSTS1002016) 際の対処策について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/howto-deal-with-aadsts1002016/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/howto-deal-with-aadsts1002016/</id>
    <published>2022-07-28T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.258Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>現在 (2022 年 7 月現在) Azure AD の認証サービスにおける TLS 1.0 /1.1 の無効化の処理を進めています。TLS 1.0/1.1 による接続ができなくなることは、以前より Microsoft 365 のメッセージセンター、 Azure ポータルの Azure Active Directory ブレードでアナウンスをしており、 2022 年 1 月 31 日までに対策を実施するよう通知をしておりました。無効化の処理は段階的におこなわれており、 TLS1.0 /1.1 が利用されているために Azure AD の認証サービスが接続を受け付けない場合には Azure AD は AADSTS1002016 のエラーを返します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AADSTS1002016: You are using TLS version 1.0, 1.1 and/or 3DES cipher which are deprecated to improve the security posture of Azure AD. Your TenantID is: XXXXXXXXX. Please refer to https://go.microsoft.com/fwlink/?linkid=2161187 and conduct needed actions to remediate the issue. For further questions, please contact your administrator.</span><br></pre></td></tr></table></figure><p>ここ最近、突然 Azure AD の認証ができなくなった、ただ何度かリトライすると接続できることもあるというケースでは、この措置に伴い生じている可能性があります (段階的に展開しているため、リトライで TLS 1.0 /1.1 無効化の措置が未適用のサーバーに接続した場合、エラーとならず接続できます)。</p><p>サポート窓口では特に PowerShell を利用した自動化処理で問題が発生するようになったというお問い合わせを多く受けていますが、それ以外でも発生する可能性があります。処理が複数のシステムを介して行われている場合には、AADSTS1002016 のエラーが見えないものもありますし、 PowerShell でも実行するコマンドによっては、AADSTS1002016 という情報は含まれずに、例えば Connect-MSolService では次のようなエラーが返されます。<br>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MsolService : Authentication Error: Unexpected authentication failure.</span><br></pre></td></tr></table></figure></p><p>他には Web アプリケーションでこの措置の影響を受けて問題が発生している場合に次のようなエラーの発生が確認できています。<br>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IDX20803: Unable to create to obtain configuration from: &#x27;https://login.microsoftonline.com/&#123;Tenant-ID&#125;/.well-known/openid-configuration&#x27;</span><br></pre></td></tr></table></figure></p><p>PowerShell で TLS 1.2 が利用できる状態かは PowerShell を起動し、次のコマンドの実行により確認ができます。<br>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[System.Net.ServicePointManager]::SecurityProtocol</span><br></pre></td></tr></table></figure><br>実行した結果、TLS12 が含まれている、あるいは SystemDefault となっている場合には PowerShell としては TLS 1.2 を利用できる状態と判断できます (OS でも利用できるように構成されていることが前提です)。実行結果として Ssl3, Tls のみなど TLS12 が含まれない場合には TLS 1.2 は利用されない状態のため、後述します 「PowerShell (.NET Framework) で TLS 1.2 が利用されるように設定する方法」 にしたがってレジストリ設定を実施ください。</p><p>IDX20803 が記録されているパターンなどでは問題が発生している Web アプリケーションが TLS 1.2 を利用するようになっているか確認を実施ください。</p><h2 id="技術資料"><a href="#技術資料" class="headerlink" title="技術資料"></a>技術資料</h2><p><a href="https://docs.microsoft.com/ja-jp/troubleshoot/azure/active-directory/enable-support-tls-environment?tabs=azure-monitor">Azure AD TLS 1.1 および 1.0 の非推奨の環境で TLS 1.2 のサポートを有効にする</a></p><p><a href="https://jpdsi.github.io/blog/internet-explorer-microsoft-edge/dotnet-framework-tls12/">.NET Framework で TLS 1.1 および TLS 1.2 を有効化する方法 - まとめ -</a></p><p><a href="https://docs.microsoft.com/ja-jp/dotnet/framework/migration-guide/versions-and-dependencies">.NET Framework のバージョンおよび依存関係</a></p><h2 id="対処策"><a href="#対処策" class="headerlink" title="対処策"></a>対処策</h2><p>TLS 1.2 にて通信を行われるように設定します。<br>確認ポイントとしては、以下の 2 点となります。</p><ul><li>OS が TLS 1.2 が有効 かつ 利用できる状態か</li><li>アプリ側で TLS 1.2 が有効でかつ利用できる状態か</li></ul><h3 id="OS-上の-TLS-1-2-設定を確認・変更する方法"><a href="#OS-上の-TLS-1-2-設定を確認・変更する方法" class="headerlink" title="OS 上の TLS 1.2 設定を確認・変更する方法"></a>OS 上の TLS 1.2 設定を確認・変更する方法</h3><p>現在サポートされているすべての Windows OS / Windows Server OS では、既定で TLS 1.2 が有効化されております。<br>そのため、サポート対象の Windows OS 観点では TLS 1.2 を利用できる状態です。</p><p>Windows 7 / Windows Server 2008 R2 の場合は、OS として TLS 1.2  を利用できますが有効化されていません。<br>以下のレジストリ値を設定し、 Windows OS として既定で利用できるよう設定を変更してください。</p><p>それ以降の OS ではレジストリ キーが存在していない場合も TLS 1.2 は有効化されています。DisabledByDefault = 1 または Enabled = 0 が設定されているときのみ設定変更を実施ください。</p><pre><code>キー : HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Client名前 : DisabledByDefault種類 : REG_DWORD値 : 0キー : HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Client名前 : Enabled種類 : REG_DWORD値 : 1キー : HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server名前 : DisabledByDefault種類 : REG_DWORD値 : 0キー : HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server名前 : Enabled種類 : REG_DWORD値 : 1</code></pre><h3 id="PowerShell-NET-Framework-で-TLS-1-2-が利用されるように設定する方法"><a href="#PowerShell-NET-Framework-で-TLS-1-2-が利用されるように設定する方法" class="headerlink" title="PowerShell (.NET Framework) で TLS 1.2 が利用されるように設定する方法"></a>PowerShell (.NET Framework) で TLS 1.2 が利用されるように設定する方法</h3><p>アプリケーションがどのようなフレーム ワークを使用して利用して作成されているかに依存しますが、主に本エラーが発生しているシナリオとして PowerShell で  Connect-AzureAD や Connect-Msolservice、 Connect-ExchangeOnline など、 Azure AD への接続コマンドを実施しているシナリオが多く見受けられます。PowerShell で TLS 1.2 を利用するためには .NET Framework で TLS 1.2 が利用されるように設定されている必要があります。</p><p>問題が生じた環境では、OS の設定に加えて、次のレジストリ設定を実施の上、再起動します。</p><pre><code>キー : HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319名前 : SchUseStrongCrypto種類 : REG_DWORD値 : 1キー : HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework\v4.0.30319名前 : SchUseStrongCrypto種類 : REG_DWORD値 : 1</code></pre><p>なお、 PowerShell を実行時に事前に以下のコマンドを実行すれば、明示的に TLS 1.2 を指定して接続ができますので、この方法でも構いません。<br>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls12</span><br></pre></td></tr></table></figure></p><h4 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項:"></a>注意事項:</h4><p>.NET Framework 4.6 以降であれば特にこのレジストリを設定しなくとも TLS 1.2 に対応しています。しかし、.Net Framework に依存するアプリケーション (Powershell もその 1 つです) と OS の組み合わせによっては 4.6 以降のバージョンを利用していても明示的にレジストリを設定しないと TLS 1.2 を利用してくれません。<br>具体的には Windows Server 2016 (およびそれ以前) 上で PowerShell を利用する場合には、 .Net Framework のバージョンに依らずレジストリ設定 (または PowerShell の場合事前にコマンドで明示的に TLS 1.2 を指定) が必要です。また、 ADAL ライブラリで Microsoft.IdentityModel.Clients.ActiveDirectory を利用している場合にも既定では TLS 1.0/1.1 が利用されるため、そのようなケースでもレジストリ設定を行います。 </p><h3 id="TLS-1-0-1-1-を利用した-Azure-AD-への認証要求の有無を確認する方法"><a href="#TLS-1-0-1-1-を利用した-Azure-AD-への認証要求の有無を確認する方法" class="headerlink" title="TLS 1.0/1.1 を利用した Azure AD への認証要求の有無を確認する方法"></a>TLS 1.0/1.1 を利用した Azure AD への認証要求の有無を確認する方法</h3><p>対処策の設定ををしても問題が解消しない場合には、 Azure AD への認証までの経路にあるプロキシ サーバーが TLS1.2 を利用していない、ご利用のシステムのバックエンドで TLS 1.0/1.1 を利用している可能性があります。TLS 1.0/1.1 を利用した認証要求が Azure AD に来ているかはサインインログで判断ができます。</p><ol><li>Azure portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) に全体管理者でサインインし、 [Azure Active Directory] を開きます。</li><li>[サインイン ログ] を選択します。</li><li>“ユーザーのサインイン (対話型)” を選択して、認証に失敗するアカウントのサインイン ログ エントリを選択します。</li><li>[追加の詳細情報] タブを選択します (このタブが表示されない場合は、最初に右隅の省略記号 (…) を選択して、タブの完全なリストを表示します)。</li><li>レガシ TLS (TLS 1.0, 1.1, 3DES) True という表示が含まれる場合は、TLS 1.0/1.1 を使用してサインインが行われています。 TLS 1.2 を使用している場合には何も表示されません。</li><li>同様に “ユーザーのサインイン (非対話型)” を選択して、同様に確認を実施します。PowerShell を利用して失敗しているケースでは (非対話型) のほうに “レガシ TLS (TLS 1.0, 1.1, 3DES)” で接続していることを示す情報が表示されます。</li></ol><h3 id="テナントでこの影響を受けて認証に失敗しているか確認する方法"><a href="#テナントでこの影響を受けて認証に失敗しているか確認する方法" class="headerlink" title="テナントでこの影響を受けて認証に失敗しているか確認する方法"></a>テナントでこの影響を受けて認証に失敗しているか確認する方法</h3><p>本影響を受けてサインインに失敗した場合、 Azure AD のサインイン ログにサインインのエラーコードとして 1002016 を含む失敗のエントリが記録されます。<br>サインイン ログを csv 形式でダウンロードし、サインインのエラーコードとして 1002016 が含まれているか確認することで TLS 1.0/1.1 無効化の影響を受け認証失敗しているか確認できます。</p><ol><li>Azure portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) に全体管理者でサインインし、 [Azure Active Directory] を開きます。</li><li>[サインイン ログ] を選択します。</li><li>フィルタとして “許可された時刻:過去 24 時間” が既定で設定されていますので適宜 “過去 7 日間” などに変更します。</li><li>[ダウンロード] - “CSV のダウンロード” をクリックします。</li><li>InteractiveSignIns_20xx-xx-xx_20xx-xx-xx、NonInteractiveSignIns_20xx-xx-xx_20xx-xx-xx、ApplicationSignIns_20xx-xx-xx_20xx-xx-xx、MSISignIns_20xx-xx-xx_20xx-xx-xx の 4 つをそれぞれダウンロードします。</li><li>ダウンロードした CSV ファイルを開き、”サインインのエラー コード” として 1002016 が含まれていないか確認します。</li></ol><h3 id="テナントでこの影響を受けて認証に失敗しているか確認する方法-PowerShell-を利用してサインインログを抽出"><a href="#テナントでこの影響を受けて認証に失敗しているか確認する方法-PowerShell-を利用してサインインログを抽出" class="headerlink" title="テナントでこの影響を受けて認証に失敗しているか確認する方法 (PowerShell を利用してサインインログを抽出)"></a>テナントでこの影響を受けて認証に失敗しているか確認する方法 (PowerShell を利用してサインインログを抽出)</h3><p>Azure AD Premium をテナントで利用されていることが前提ですが、 PowerShell コマンドを利用して TLS 1.0/1.1 が利用されたことを示すエントリのみをフィルタして CSV 形式でダウンロードするスクリプトを紹介します。</p><ol><li><p>[管理者として実行] オプションを使用して、[スタート] メニューから Windows PowerShell を開きます。</p></li><li><p>次のコマンドを実行して、Microsoft Graph SDK をインストールし、実行ポリシーを設定します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Install-Module Microsoft.Graph -Scope AllUsers</span><br><span class="line">Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope CurrentUser</span><br></pre></td></tr></table></figure></li><li><p>次のスクリプトを PowerShell スクリプト (.ps1) ファイルに保存します。最初の 3 行は、取得対象テナントのテナント ID、何日分のログを取得するかの日数 (例では 7 日になっています)、出力先のフォルダ名 (例では c:\temp) を環境に合わせて編集します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$tId = &quot;テナント ID&quot;  # テナント ID を入れてください。テナント ID は Azure ポータルの Azure Active Directory の概要から取得できます。 </span><br><span class="line">$agoDays = 7  # 何日前からのログを取得するか日数を指定します。</span><br><span class="line">$pathForExport = &quot;c:\temp\&quot;  # CSV ファイルの出力先フォルダ名を入力します。</span><br><span class="line">$startDate = (Get-Date).AddDays(-($agoDays)).ToString(&#x27;yyyy-MM-dd&#x27;)  # $agoDays で指定した日数を元に取得対象の開始日を得ます</span><br><span class="line"></span><br><span class="line">Connect-MgGraph -Scopes &quot;AuditLog.Read.All&quot; -TenantId $tId </span><br><span class="line">Select-MgProfile &quot;beta&quot;  # ベータのエンドポイントへの接続が必要です</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$procDetailFunction = &quot;x: x/key eq &#x27;legacy tls (tls 1.0, 1.1, 3des)&#x27; and x/value eq &#x27;1&#x27;&quot;</span><br><span class="line">$clauses = (</span><br><span class="line">    &quot;createdDateTime ge $startDate&quot;,</span><br><span class="line">    &quot;signInEventTypes/any(t: t eq &#x27;nonInteractiveUser&#x27;)&quot;,</span><br><span class="line">    &quot;signInEventTypes/any(t: t eq &#x27;servicePrincipal&#x27;)&quot;,</span><br><span class="line">    &quot;(authenticationProcessingDetails/any($procDetailFunction))&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># フィルタ条件に従って対話型、非対話型、 ServicePrincipal のそれぞれのログを取得します。</span><br><span class="line">$signInsInteractive = Get-MgAuditLogSignIn -Filter ($clauses[0,3] -Join &quot; and &quot;) -All</span><br><span class="line">$signInsNonInteractive = Get-MgAuditLogSignIn -Filter ($clauses[0,1,3] -Join &quot; and &quot;) -All</span><br><span class="line">$signInsWorkloadIdentities = Get-MgAuditLogSignIn -Filter ($clauses[0,2,3] -Join &quot; and &quot;) -All</span><br><span class="line"></span><br><span class="line">$columnList = @&#123;  # 対話型、非対話型の出力ファイルに含むカラムを定義しています</span><br><span class="line">    Property = &quot;CorrelationId&quot;, &quot;createdDateTime&quot;, &quot;userPrincipalName&quot;, &quot;userId&quot;,</span><br><span class="line">              &quot;UserDisplayName&quot;, &quot;AppDisplayName&quot;, &quot;AppId&quot;, &quot;IPAddress&quot;, &quot;isInteractive&quot;,</span><br><span class="line">              &quot;ResourceDisplayName&quot;, &quot;ResourceId&quot;, &quot;UserAgent&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$columnListWorkloadId = @&#123; # Service Principal の出力ファイルに含むカラムを定義しています</span><br><span class="line">    Property = &quot;CorrelationId&quot;, &quot;createdDateTime&quot;, &quot;AppDisplayName&quot;, &quot;AppId&quot;, &quot;IPAddress&quot;,</span><br><span class="line">              &quot;ResourceDisplayName&quot;, &quot;ResourceId&quot;, &quot;ServicePrincipalId&quot;, &quot;ServicePrincipalName&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$signInsInteractive | ForEach-Object &#123;</span><br><span class="line">    foreach ($authDetail in $_.AuthenticationProcessingDetails)</span><br><span class="line">    &#123;</span><br><span class="line">        if (($authDetail.Key -match &quot;Legacy TLS&quot;) -and ($authDetail.Value -eq &quot;True&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            $_ | Select-Object @columnList -ExpandProperty Status</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; | Export-Csv -Path ($pathForExport + &quot;Interactive_lowTls_$tId.csv&quot;) -NoTypeInformation</span><br><span class="line"></span><br><span class="line">$signInsNonInteractive | ForEach-Object &#123;</span><br><span class="line">    foreach ($authDetail in $_.AuthenticationProcessingDetails)</span><br><span class="line">    &#123;</span><br><span class="line">        if (($authDetail.Key -match &quot;Legacy TLS&quot;) -and ($authDetail.Value -eq &quot;True&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            $_ | Select-Object @columnList -ExpandProperty Status</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; | Export-Csv -Path ($pathForExport + &quot;NonInteractive_lowTls_$tId.csv&quot;) -NoTypeInformation</span><br><span class="line"></span><br><span class="line">$signInsWorkloadIdentities | ForEach-Object &#123;</span><br><span class="line">    foreach ($authDetail in $_.AuthenticationProcessingDetails)</span><br><span class="line">    &#123;</span><br><span class="line">        if (($authDetail.Key -match &quot;Legacy TLS&quot;) -and ($authDetail.Value -eq &quot;True&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            $_ | Select-Object @columnListWorkloadId -ExpandProperty Status</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; | Export-Csv -Path ($pathForExport + &quot;WorkloadIdentities_lowTls_$tId.csv&quot;) -NoTypeInformation</span><br></pre></td></tr></table></figure></li><li><p>スクリプトを保存して実行します。 スクリプトの実行時にメッセージが表示されたら、グローバル管理者としてサインインします。 次に、Microsoft Graph に監査ログ情報を読み取らせることに同意します。</p></li><li><p>指定したフォルダに Interactive_lowTls_&lt;テナント ID&gt;.csv、 NonInteractive_lowTls_&lt;テナント ID&gt;.csv、WorkloadIdentities_lowTls_&lt;テナント ID&gt;.csv の 3 ファイルが作成されます。このファイルには TLS 1.0/1.1 を利用したサインイン エントリのみが含まれます。認証が失敗した場合には ErrorCode のカラムに 1002016 が含まれますので、本問題が該当のテナントでいつから生じているかも確認が可能です。</p></li></ol><h3 id="TLS-1-0-を利用した-Azure-AD-への認証を試みる方法"><a href="#TLS-1-0-を利用した-Azure-AD-への認証を試みる方法" class="headerlink" title="TLS 1.0 を利用した Azure AD への認証を試みる方法"></a>TLS 1.0 を利用した Azure AD への認証を試みる方法</h3><p>TLS 1.0/1.1 の無効化は段階的に進められています。接続先のデータセンターによって事象が発生の有無が変わります (そのため事象が突然発生したり、発生しなくなったりもします)。すでに Azure AD PowerShell がインストールされている前提で、 TLS 1.0 での接続を試したい場合には、次のような方法で明示的に TLS 1.0 を利用した接続テストを行うことができます (TLS 1.0 を利用すること自体は推奨されません)。</p><ol><li>PowerShell を起動します。</li><li>次のコマンドを実行します。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls</span><br></pre></td></tr></table></figure></li><li>connect-azuread を実行して表示されるポップアップでユーザー名、パスワードを入力します。</li><li>TLS 1.0/1.1 が利用されているために接続できない場合にはエラー画面が表示され、そこにはエラーコード AADSTS1002016 が含まれます。 </li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;現在 (2022 年 7 月現在) Azure AD の認証サービスにおける TLS 1.0 /1.1 の無効化の処理を進めています。TLS 1.0/1.1 による接続ができなくなること</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="PowerShell" scheme="https://jpazureid.github.io/blog/tags/PowerShell/"/>
    
    <category term="TLS 1.2" scheme="https://jpazureid.github.io/blog/tags/TLS-1-2/"/>
    
  </entry>
  
  <entry>
    <title>オンプレミス AD でクラウド上のグループを使用するグループ ライトバック機能のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/use-cloud-groups-in-on-premises-active-directory-with-group/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/use-cloud-groups-in-on-premises-active-directory-with-group/</id>
    <published>2022-07-27T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.514Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 7 月 6 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/use-cloud-groups-in-on-premises-active-directory-with-group/ba-p/3118023">Use cloud groups in on-premises Active Directory with group writeback</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>グループ ライトバックの大幅な機能強化がパブリック プレビューで発表でき、とても嬉しく思っています。Azure AD Connect を使用して、セキュリティ グループを含むクラウド グループをオンプレミスの Active Directory に書き戻すことができます。このプレビューにより、クラウドで管理されているグループを使用して、オンプレミスのリソースへのアクセスを管理することができます。</p><p>現在、M365 のグループをユニバーサル配布グループとして、オンプレミスの Active Directory に書き戻すことが可能です。今回のパブリック プレビューでは、ライトバックできるグループを拡大するとともに、MS Graph と Azure 管理ポータルでライトバック対象のグループを管理する機能を追加し、Azure AD Connect でオンプレミスのグループを見つけやすくする機能を追加しています。</p><h2 id="M365-グループの機能強化"><a href="#M365-グループの機能強化" class="headerlink" title="M365 グループの機能強化"></a>M365 グループの機能強化</h2><ul><li>PowerShell、MS Graph、または Azure 管理ポータルを使用して、M365 グループをユニバーサル配布グループ、セキュリティ グループ、メールが有効なセキュリティ グループのいずれかとして、オンプレミスの Active Directory に書き戻すことができるようになりました。</li><li>MS Graph を使用して、新しく作成された M365 グループを自動的に書き戻す設定をテナント全体で行うことができます。</li></ul><h2 id="グループ-ライトバックの新機能"><a href="#グループ-ライトバックの新機能" class="headerlink" title="グループ ライトバックの新機能"></a>グループ ライトバックの新機能</h2><ul><li>PowerShell、MS Graph、Microsoft Entra の管理センターを使って、Azure AD のセキュリティ グループをユニバーサル セキュリティ グループとしてオンプレミスの Active Directory に書き戻す設定もできるようになりました。</li><li>Azure AD Connect でグループのライトバックを設定する際、オンプレミスの識別名のコモン ネームをクラウド グループの表示名に置き換えるオプションがあり、Azure AD からライトバックされるグループの識別が容易になりました。</li><li>Active Directory に書き戻すグループは、MS Graph Explorer や Microsoft Entra の管理センターを使って管理することができます。</li></ul><p><img src="/blog/azure-active-directory/use-cloud-groups-in-on-premises-active-directory-with-group/image01.jpg"></p><p><img src="/blog/azure-active-directory/use-cloud-groups-in-on-premises-active-directory-with-group/image02.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 7 月 6 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>CSP プログラムにおけるパートナーセンターから顧客テナントにアクセスする際の条件付きアクセス ポリシーについて</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/capolicy-for-csp-account/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/capolicy-for-csp-account/</id>
    <published>2022-07-24T15:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.070Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの栗井です。<br>本記事では、クラウド ソリューション プロバイダー プログラム パートナー (以下 CSP パートナー) 様から多くいただくご相談について、情報をおまとめいたしました。</p><h2 id="よくある事例-パートナー-センターから顧客のテナントにアクセスすることができません。"><a href="#よくある事例-パートナー-センターから顧客のテナントにアクセスすることができません。" class="headerlink" title="よくある事例 : パートナー センターから顧客のテナントにアクセスすることができません。"></a>よくある事例 : パートナー センターから顧客のテナントにアクセスすることができません。</h2><p>CSP パートナー テナントに所属するアカウントは、代理管理者権限を持つ場合、パートナー センター (<a href="https://partner.microsoft.com/">https://partner.microsoft.com</a>) 経由で、リセラー関係を結ぶ顧客のテナントに対しての特権アクセス (グローバル管理者相当) が可能です。</p><div class="alert is-info"><p class="alert-title">Note</p><p>本記事内では、顧客テナントに対して代理管理者権限を持つ、CSP パートナー テナントのアカウントを、「CSP アカウント」と記載します。</p></div><p>さて、この「CSP アカウントによる顧客テナントへのアクセス」について、CSP パートナーの方から、下記のようなご相談をよく受けます。</p><ul><li>お問い合わせ内容 : ある時を境に、パートナーセンターを経由した顧客テナントへのアクセスが、下記画面によって、ブロックされるようになった。この事象は特定の顧客 (1 社) のみで発生しており、他の顧客テナントへのアクセスは問題なく可能です。<br><img src="/blog/azure-active-directory/capolicy-for-csp-account/blocked.png">  </li></ul><p>上記の画面は、<strong>条件付きアクセス ポリシー</strong>と呼ばれる Azure AD の機能によって、アクセスがブロックされたことを示します。</p><p>※ 条件付きアクセスは、多くのお客様にご利用いただいているセキュリティ機能です。機能の詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">Azure Active Directory の条件付きアクセスとは - Microsoft Entra</a> をご参照ください。</p><p>顧客のほとんどは、自分のテナントで条件付きアクセス ポリシーを構成する際に、CSP アカウントによるアクセスへの影響を意識しません。そのため、作成したポリシーによって、意図せずに CSP アカウントによるアクセスをブロックしてしまう場合があります。</p><p>CSP アカウントに対してのポリシー適用は、通常のユーザーを制御する場合とは仕組みが異なります。留意点ならびに回避策について、本記事でご紹介します。</p><h2 id="CSP-アカウントに条件付きアクセス-ポリシーが適用される場合"><a href="#CSP-アカウントに条件付きアクセス-ポリシーが適用される場合" class="headerlink" title="CSP アカウントに条件付きアクセス ポリシーが適用される場合"></a>CSP アカウントに条件付きアクセス ポリシーが適用される場合</h2><p>顧客のテナント上で、条件付きアクセス ポリシーのユーザー 割り当て設定を開き、CSP アカウントを検索しても、結果には表示されません。なぜなら、<strong>CSP アカウントは、顧客のテナント上にユーザー オブジェクトが存在しない、特殊なアカウント</strong>であるためです。</p><p><img src="/blog/azure-active-directory/capolicy-for-csp-account/notfound.png">  </p><p>それではどのような設定をすると、CSP アカウントによるアクセスにポリシーが適用されるのか？それは、<strong>割り当て対象に “すべてのユーザー” もしくは “すべてのゲストと外部ユーザー” のいずれかを選択した場合</strong>です。</p><ul><li>“すべてのユーザー” を選択 : すべてのユーザーのサインインに対して、一律にポリシーの制御が適用されるため、CSP アカウントによるアクセスも制御対象となります。</li><li>“すべてのゲストと外部ユーザー” を選択 : Azure AD B2B で招待されたゲスト ユーザーに加え、 CSP アカウントによるアクセスが制御対象となります。</li></ul><p>上記の動作となるため、下記内容のお問い合わせを、CSP パートナーの方からいただきます。</p><h3 id="【よくある事例-CSP-アカウントがブロックされてしまう】"><a href="#【よくある事例-CSP-アカウントがブロックされてしまう】" class="headerlink" title="【よくある事例 : CSP アカウントがブロックされてしまう】"></a>【よくある事例 : CSP アカウントがブロックされてしまう】</h3><ul><li>お問い合わせ内容 (再掲) : ある時を境に、パートナーセンターを経由した顧客テナントへのアクセスが、ブロックされるようになった。この事象は特定の顧客 (1 社) のみで発生しており、他の顧客テナントへのアクセスは問題なく可能です。</li><li>原因 : 顧客のテナントで、下記のポリシーが有効化されたこと (ポリシー内容の一部が異なる場合にも発生する可能性があります)。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[名前] : &quot;社内 IP のみアクセス許可&quot;</span><br><span class="line"></span><br><span class="line">[割り当て] </span><br><span class="line"></span><br><span class="line">  [ユーザーとグループ] : すべてのユーザー</span><br><span class="line"></span><br><span class="line">  [クラウド アプリまたは操作] : すべてのクラウド アプリ</span><br><span class="line"></span><br><span class="line">[条件] </span><br><span class="line"></span><br><span class="line">  [場所] : すべての場所 (対象外 : 社内ネットワークのグローバル IP アドレス)</span><br><span class="line"></span><br><span class="line">[アクセス制御] </span><br><span class="line"></span><br><span class="line">  [許可] : アクセスのブロック</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="CSP-アカウントへの条件付きアクセス-ポリシーの適用を回避する方法"><a href="#CSP-アカウントへの条件付きアクセス-ポリシーの適用を回避する方法" class="headerlink" title="CSP アカウントへの条件付きアクセス ポリシーの適用を回避する方法"></a>CSP アカウントへの条件付きアクセス ポリシーの適用を回避する方法</h2><h3 id="前提-ユーザーとグループ-gt-対象外-の項目で-CSP-アカウントを指定して回避することはできません"><a href="#前提-ユーザーとグループ-gt-対象外-の項目で-CSP-アカウントを指定して回避することはできません" class="headerlink" title="前提 : [ユーザーとグループ] &gt; [対象外] の項目で CSP アカウントを指定して回避することはできません"></a>前提 : [ユーザーとグループ] &gt; [対象外] の項目で CSP アカウントを指定して回避することはできません</h3><p>条件付きアクセス ポリシーでは、割り当て対象ユーザーの設定画面において [対象外] の項目があります。通常であれば、特定のユーザーをポリシーの割り当て対象から除外したい場合は、[対象外] の項目で該当のユーザーを指定する方法が適切です。</p><p>しかし、CSP アカウントの場合は、この方法を利用できません。前述の通り、CSP アカウントは顧客のテナント上にユーザー オブジェクトが存在しない、特別なアカウントです。 そのため、[対象外] の項目で選択することができません。</p><p>したがって、割り当て対象ユーザーの設定では、CSP アカウントを明示的にポリシーの適用対象外に指定することはできません。以下で 3 通りの回避策を紹介します。</p><ol><li>CSP アカウントのアクセス元 IP アドレスを、ポリシーの割り当て対象外に指定</li><li>“ディレクトリ ロール : グローバル管理者” を、ポリシーの割り当て対象外に指定</li><li>“すべてのユーザー” または “すべてのゲストと外部ユーザー” を利用しない</li></ol><div class="alert is-info"><p class="alert-title">Note</p><p>いずれの回避策も、顧客テナント上で設定されている条件付きアクセス ポリシーの設定を変更します。そのため、操作は顧客テナントの Azure ポータル上で実施ください。</p></div><h3 id="回避策-1-CSP-アカウントのアクセス元-IP-アドレスを、ポリシーの割り当て対象外に指定"><a href="#回避策-1-CSP-アカウントのアクセス元-IP-アドレスを、ポリシーの割り当て対象外に指定" class="headerlink" title="回避策 1 : CSP アカウントのアクセス元 IP アドレスを、ポリシーの割り当て対象外に指定"></a>回避策 1 : CSP アカウントのアクセス元 IP アドレスを、ポリシーの割り当て対象外に指定</h3><p>CSP アカウントによるアクセス元 IP アドレスが特定のアドレス (範囲) になることが判明している場合に採用できます。アクセス元の IP アドレスを、ポリシーの適用対象外に指定ください。</p><ul><li><p><strong>【手順 1 : CSP アカウントによるアクセス元 IP を、ネームドロケーションに登録】</strong></p><ol><li><p>Azure ポータル &gt; Azure Active Directory &gt; セキュリティ &gt; 条件付きアクセス &gt; [ネームドロケーション] に進みます。</p></li><li><p>[+ 新しい場所] を選択して、下記のネームド ロケーションを登録します。</p><p> [名前] : 任意 (例 : CSP 接続ポイント)</p><p> [次を使用して場所を定義します] : IP 範囲</p><p> [IP 範囲] : &lt;CSP アカウントの事業所のグローバル IP アドレス範囲&gt;</p></li><li><p>[作成] を選択し、ネームド ロケーションを保存します。下記の【手順 2】に進みます。</p></li></ol></li><li><p><strong>【手順 2 : 登録したネームド ロケーションを、ポリシーの対象外に指定】</strong></p><ol start="4"><li>該当の条件付きアクセス ポリシーの設定画面を開きます。</li><li>[条件] &gt; [場所] に進み、[構成] を “はい” にします。</li><li>“対象” の構成で “すべての場所” を選択します。</li><li>“対象外” の構成で “選択された場所” を選択し、手順 2 で登録したネームド ロケーションを指定します。</li><li>ポリシーの変更を保存します。</li></ol></li></ul><p>上記の通り、ポリシーを変更することで、CSP アカウントが [IP 範囲] で指定したネットワーク ロケーションからアクセスする際には、ポリシーによる制御は行われなくなります。</p><h3 id="回避策-2-“ディレクトリ-ロール-グローバル管理者”-を、ポリシーの割り当て対象外に指定"><a href="#回避策-2-“ディレクトリ-ロール-グローバル管理者”-を、ポリシーの割り当て対象外に指定" class="headerlink" title="回避策 2 : “ディレクトリ ロール : グローバル管理者” を、ポリシーの割り当て対象外に指定"></a>回避策 2 : “ディレクトリ ロール : グローバル管理者” を、ポリシーの割り当て対象外に指定</h3><p>条件付きアクセス ポリシーの割り当て設定では、特定の Azure AD ロールを持つユーザーを、ポリシーの割り当て対象外に指定可能です。</p><p>グローバル管理者のロールを、ポリシーの割り当て対象外に指定することで、顧客テナント上でグローバル管理者ロールを持つアカウント、ならびに CSP アカウントに対しては、ポリシーが適用されなくなります。必要に応じて、このポリシーとは別にグローバル管理者ロールを持つアカウントを個別に対象とするポリシーを追加ください。</p><ul><li>設定箇所 : 割り当て &gt; ユーザーまたはワークロード ID &gt; 対象外“ディレクトリ ロール” にチェックを入れ、一覧から “グローバル管理者” を選択。</li></ul><h3 id="回避策-3-“すべてのユーザー”-または-“すべてのゲストと外部ユーザー”-を利用しない"><a href="#回避策-3-“すべてのユーザー”-または-“すべてのゲストと外部ユーザー”-を利用しない" class="headerlink" title="回避策 3 : “すべてのユーザー” または “すべてのゲストと外部ユーザー” を利用しない"></a>回避策 3 : “すべてのユーザー” または “すべてのゲストと外部ユーザー” を利用しない</h3><p>前述の通り、”すべてのユーザー” “すべてのゲストと外部ユーザー” を割り当て対象とするポリシーは、CSP アカウントによるアクセスに対しても一律に適用されます。</p><p>これらの割り当てオプションを利用せずに、<strong>ポリシーを適用するユーザーを個別に指定</strong>することで、CSP アカウントに対してのポリシー適用を回避が可能です。</p><p>「ポリシーを適用するユーザーを個別に指定」とは、[対象]  &gt; [ユーザーとグループ]  の項目において、ポリシー適用対象ユーザー (もしくはユーザー グループ) を、1 個ずつ指定する方法です。</p><p><img src="/blog/azure-active-directory/capolicy-for-csp-account/selectusers.png"> </p><p>しかし、テナント上に 1000 人単位のユーザーが登録されているような大規模な組織では、ユーザー アカウントを 1 個ずつ選択するという操作は、現実的ではないかもしれません。</p><p>このような場合は、次の項目でご紹介する “動的グループ” の機能によるユーザーグループの作成をご利用が便利です。</p><h3 id="動的グループを利用したユーザーグループの作成方法"><a href="#動的グループを利用したユーザーグループの作成方法" class="headerlink" title="動的グループを利用したユーザーグループの作成方法"></a>動的グループを利用したユーザーグループの作成方法</h3><p>“動的グループ” とは、ユーザーのプロパティ (属性値) に基づくルールを記述することで、ユーザー グループに自動でユーザーを追加する機能です。</p><p>動的グループの機能の詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/groups-create-rule">Azure Active Directory で動的グループを作成または更新する | Microsoft Docs</a> をご覧ください。 </p><p>以下では、条件付きアクセス ポリシーにおける “すべてのユーザー” ならびに “すべてのゲストと外部ユーザー” の代わりとしてご利用可能な、動的グループ メンバーシップルールをご紹介します。いずれのグループも、CSP アカウントは含まれません。</p><ul><li><p>「すべてのユーザー (除外 : CSP アカウント)」 に該当する、動的メンバーシップ ルール<br><img src="/blog/azure-active-directory/capolicy-for-csp-account/allusers.png">  </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(user.objectId -ne null)</span><br></pre></td></tr></table></figure></li><li><p>「すべてのゲストと外部ユーザー (除外 : CSP アカウント)」 に該当する、動的メンバーシップ ルール<br><img src="/blog/azure-active-directory/capolicy-for-csp-account/allguestusers.png"> </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(user.objectId -ne null) and (user.userType -eq &quot;Guest&quot;)</span><br></pre></td></tr></table></figure></li></ul><p>上記 2 つのルールはいずれも「オブジェクト ID が null ではない」という条件を含みます。従って、ユーザー オブジェクト自体が存在しない CSP アカウントは、その条件を満たさず、グループのメンバーには含まれません。</p><p>上記の手順で作成したユーザー グループは、条件付きアクセス ポリシーの [ユーザーとグループの選択] において選択することができます。</p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ul><li><p><strong><span style="color:blue">Q </span>.</strong> [対象外] に “すべてのゲストと外部ユーザー” を指定することで、CSP アカウントへのポリシー適用を回避できますか？</p><p><strong><span style="color:red">A </span>.</strong>  はい、回避可能です。</p></li><li><p><strong><span style="color:blue">Q </span>.</strong> “すべてのユーザー” に対して多要素認証 (MFA) を要求するポリシーを作成した場合、CSP アカウントは MFA 要求を満たすことができますか ? それともアクセスが失敗しますか ?</p><p><strong><span style="color:red">A </span>.</strong>  CSP アカウントは MFA 要求を満たすことができます。そのため、MFA を要求するポリシーを CSP アカウントに対して適用しても、CSP アカウントのアクセスがブロックされることはありません。</p></li><li><p><strong><span style="color:blue">Q </span>.</strong> “すべてのユーザー” に対して、アクセス許可条件として “準拠済みデバイス” “Hybrid Azure AD Join 済みデバイス” を要求するポリシーを作成した場合、CSP アカウントはこの条件を満たすことができますか？</p><p><img src="/blog/azure-active-directory/capolicy-for-csp-account/compliant-or-haadj.png">  </p><p><strong><span style="color:red">A </span>.</strong>  いいえ。”準拠済みデバイス” “Hybrid Azure AD Join 済みデバイス” の条件は、テナントに直接所属するユーザーのみが満たすことができる条件です。ゲストユーザーならびに外部ユーザー (CSP アカウント含む) に対してこの条件が適用された場合は、下記画面によって、アクセスがブロックされます。</p><p><img src="/blog/azure-active-directory/capolicy-for-csp-account/notcompliant.png">  </p></li><li><p><strong><span style="color:blue">Q </span>.</strong> CSP アカウントによる顧客テナントへのアクセスは、顧客テナントのサインイン ログに記録されますか ?</p><p><strong><span style="color:red">A </span>.</strong>  はい、記録されます。</p><p>CSP アカウントによるアクセスは、通常のテナント ユーザーと同様に、Azure ポータル &gt; Azure Active Directory &gt; サインイン ログ から確認可能です。</p><p>CSP アカウントによるアクセスをフィルターする場合、[+ フィルターの追加] から “クロス テナントの種類 : サービス プロバイダー” を指定ください。</p><p>各行を選択すると、サインイン ログの詳細が表示されます。[条件付きアクセス] タブから、適用されたポリシーと制御内容を確認できるので、トラブルシューティングの際にご活用ください。</p><ul><li>ユーザー名は “[パートナーテナント名] technician” という文字列が表示されます。</li><li>CSP アカウントによるアクセス元の IP アドレスは、下 3 桁がマスクされます。</li></ul></li></ul><p>上記内容が少しでも皆様の参考となりますと幸いです。ご不明な点がございましたら、弊社サポートまでお気軽にお問い合わせください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの栗井です。&lt;br&gt;本記事では、クラウド ソリューション プロバイダー プログラム パートナー (以下 CSP パートナー) 様から多くいただくご相談について、情報をおまとめいたしました。&lt;/p&gt;
&lt;h2</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Conditional Access" scheme="https://jpazureid.github.io/blog/tags/Conditional-Access/"/>
    
    <category term="条件付きアクセス" scheme="https://jpazureid.github.io/blog/tags/%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Permissions Management が GA しました！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-permissions-management-is-now-generally/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-permissions-management-is-now-generally/</id>
    <published>2022-07-24T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.350Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 7 月 7 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-permissions-management-is-now-generally/ba-p/3290630">Microsoft Entra Permissions Management is now generally available!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>当社は、企業のマルチクラウド戦略を支援するというミッションの一環として、<a href="https://blogs.microsoft.com/blog/2021/07/21/microsoft-acquires-cloudknox-security-to-offer-unified-privileged-access-and-cloud-entitlement-management/">昨年夏、Cloud Infrastructure Entitlement Management (CIEM) 分野のリーダーである CloudKnox Security 社を買収</a> しました。また、<a href="https://jpazureid.github.io/blog/azure-active-directory/cloudknox-permissions-management-is-now-in-public-preview/">2 月にはこのソリューションのパブリック プレビューを開始</a> しました。それ以来、GDPR 対応、ローカライゼーション、自動でのオンボーディングなどの機能拡張を行い、GA に向けて準備を進めてきました。  </p><p>本日、<a href="https://www.microsoft.com/security/blog/2022/05/31/secure-access-for-a-connected-worldmeet-microsoft-entra/">Microsoft Entra のポートフォリオ</a> の一部として、<a href="https://aka.ms/PermissionsManagement">Microsoft Entra Permissions Management</a> (旧 CloudKnox) の一般提供 (GA) を発表できることを嬉しく思います。Permissions Management は、スタンドアロンのソリューションとして、1 リソースあたり年間 125 ドルで本日より提供されます。対応するリソースは、Amazon Web Services、Microsoft Azure、Google Cloud Platform のコンピュート リソース、コンテナ クラスター、サーバーレス機能、およびデータベースです。それでは、製品の特長とアップデートの一部をご紹介します。</p><p><a href="https://www.microsoft.com/en-us/videoplayer/embed/RE50qYJ">Microsoft Entra Permissions Management の紹介動画</a></p><h2 id="1-つの統一プラットフォームであらゆるクラウドに存在するあらゆる-ID-のアクセス許可を管理"><a href="#1-つの統一プラットフォームであらゆるクラウドに存在するあらゆる-ID-のアクセス許可を管理" class="headerlink" title="1 つの統一プラットフォームであらゆるクラウドに存在するあらゆる ID のアクセス許可を管理"></a>1 つの統一プラットフォームであらゆるクラウドに存在するあらゆる ID のアクセス許可を管理</h2><p>Microsoft Entra Permissions Management は、マルチクラウド環境におけるすべての ID (人とワークロードの両方) とリソースのアクセス許可を検出、修復、監視します。アクセス許可の使用状況を継続的に監視し、履歴データを使用してクラウドの規模で最小特権の原則を適用することで、生産性を妨げることなくセキュリティ体制を強化することができます。</p><ul><li><strong>発見する</strong>: すべての ID がすべてのリソースで実行したすべてのアクションを詳細に可視化し、許可されたアクセス権と使用されたアクセス権を監視して、アクセス許可に関するリスクを評価します。</li><li><strong>修正する</strong>: 実際の使用状況に基づいて最小特権の原則を適用し、追加許可が必要な場合はアクセス許可をその時のみ付与するオンデマンドのワークフローを活用して、アクセス許可のギャップ (付与されているアクセス許可と実際に必要なアクセス許可の差) を解消します。</li><li><strong>監視する</strong>: すべてのアクティビティを継続的に監視し、異常なアクセス許可の使用を検出し、詳細なフォレンジック レポートを作成して、迅速な調査と修正をサポートします。</li></ul><p><img src="/blog/azure-active-directory/microsoft-entra-permissions-management-is-now-generally/Entra-Onboarding-GIF-v2A2.gif"></p><h2 id="オンボーディングと監視機能の機能強化"><a href="#オンボーディングと監視機能の機能強化" class="headerlink" title="オンボーディングと監視機能の機能強化"></a>オンボーディングと監視機能の機能強化</h2><p>GA リリースの一環として、AWS、Azure、GCP 環境を Permissions Management に取り込むための、新しい自動化されたアプローチを導入しています。シンプルなワークフローにより、数回クリックするだけで、クラウド全体のアクセス許可のデータを効率的に収集することができます。</p><p>Microsoft のポートフォリオとの統合を進めるため、ユーザーは Permission Creep Index を監視し、<a href="https://azure.microsoft.com/en-us/services/defender-for-cloud/">Defender for Cloud のダッシュボード</a> から直接 Permissions Management にアクセスすることも可能になりました。これにより、Defender for Cloud の保護を CIEM でさらに広げることができるようになりました。</p><p>これはまだ始まりに過ぎません。弊社では積極的に統合と機能を拡大しており、今年後半にそれらの展開を開始する予定です。GA リリースの詳細については、Permissions Management の <a href="https://aka.ms/CIEM">ドキュメント</a> をご覧ください。</p><h2 id="Microsoft-Entra-Permissions-Management-を今すぐお試しください"><a href="#Microsoft-Entra-Permissions-Management-を今すぐお試しください" class="headerlink" title="Microsoft Entra Permissions Management を今すぐお試しください"></a>Microsoft Entra Permissions Management を今すぐお試しください</h2><p>Microsoft Entra Permissions Management の 90 日間無料トライアルを提供しています。これにより、包括的なリスク評価を実施し、マルチクラウド基盤全体でアクセス許可のリスクを特定することが可能となります。</p><p>オンボーディングから数時間以内に、Permissions Management が包括的な Permissions Analytics Report を生成し、お客様の組織の最大のリスク領域を特定し、環境を改善および保護するための具体的なアドバイスを提供します。無料のリスク アセスメントは、<a href="https://aka.ms/TryPermissionsManagement">aka.ms/TryPermissionsManagement</a> からご用命ください。</p><p>Microsoft Entra Permissions Management の詳細については、<a href="https://aka.ms/PermissionsManagement">弊社の Web サイト</a> および <a href="https://aka.ms/CIEM">製品ドキュメント</a> をご覧ください。また、7 月 19 日午前 9 時 (太平洋標準時) に開催される <a href="https://aka.ms/PermissionsManagementAMA">Ask Me Anything セッション</a> に、当社のセキュリティ専門家が参加し、ご質問をお受けいたしますので、ぜひご参加ください。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate Vice President Product Management<br>Microsoft Identity Division  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 7 月 7 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>一時アクセス パスによるセキュアな認証方式の展開</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/</id>
    <published>2022-07-15T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.490Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 6 月 22 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/secure-authentication-method-provisioning-with-temporary-access/ba-p/3290631">Secure authentication method provisioning with Temporary Access Pass</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日は、一時アクセス パス (Temporary Access Pass、以下 TAP) が一般提供となりましたことをお知らせします。TAP のパブリック プレビューを <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/temporary-access-pass-is-now-in-public-preview/ba-p/1994702">発表</a> して以来、マイクロソフトでは数多くの取り組みを進めていました。</p><p><strong><em>弊社ではパスワードレスでのサインインに MS Authenticator を使用しています。社員がリソースにアクセスするにはパスワードレスのみを許可しています。登録は TAP を用いて行われ、従来のようにパスワードをユーザーに渡す必要がなくなりました…” - EU のグローバル玩具メーカー</em></strong></p><p>このリリースを担当したプロダクト マネージャーの一人である Tim Larson に、これらのアップデートの概要、TAP を使用したパスワードレスのアカウント登録、そしてリカバリのシナリオについて解説してもらいます。Tim のブログは以下をご覧ください。</p><p>Alex Simons（Twitter: <a href="https://twitter.com/Alex_A_Simons">@alex_a_simons</a>)<br>マイクロソフト アイデンティティ部門<br>コーポレート バイスプレジデント、プロダクト マネジメント</p><hr><p>皆さん、こんにちは。</p><p>以下では、TAP に関する変更と改善、そしてパスワードレスを始めるために TAP をどのように活用できるかを紹介します。</p><h2 id="TAP-とは？"><a href="#TAP-とは？" class="headerlink" title="TAP とは？"></a>TAP とは？</h2><p>TAP は時間制限付きパスコードで、ユーザーがパスワードレスの認証方法を登録し、パスワードを使用せずともアカウントへのアクセスを回復するために使用できるものです。また、TAP を使用して Windows デバイスを設定することができます。ユーザーが直接自分のデバイスを設定したり、<a href="https://docs.microsoft.com/ja-jp/mem/autopilot/windows-autopilot">Windows AutoPilot</a> を使用してデバイスを <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/concept-azure-ad-join">Azure AD に参加</a> させたり、<a href="https://docs.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/hello-overview">Windows Hello for Business</a> の設定において、TAP を使用したりることも可能です。</p><h2 id="管理者体験"><a href="#管理者体験" class="headerlink" title="管理者体験"></a>管理者体験</h2><p>認証方法ポリシーで、組織向けに TAP を設定および構成することができます。例えば、TAP の割り当てを特定のユーザーやグループに限定したり、短期間の使用に限定したり、また、1 回限りの使用に設定したりすることができます。</p><p><img src="/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/image01.jpg"></p><p><img src="/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/image02.jpg" alt="一時アクセス パスの認証方法設定"></p><p>ポリシーによって認証方法が有効になると、特権認証管理者または認証管理者は、ユーザーの認証方法ブレードにアクセスするか、API でアクセスすることによって、そのユーザーに TAP を作成することができます。また、管理者が既存の TAP を上書きする機能も追加されました。以前に作成した TAP をユーザーが忘れたり紛失したりした場合、同じ手順で TAP をユーザーのアカウントに追加するだけで、古い TAP が削除されます。</p><p><img src="/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/image03.jpg" alt="Azure Portal からユーザーへ新しい一時アクセス パスを作成"></p><h2 id="エンド-ユーザー体験"><a href="#エンド-ユーザー体験" class="headerlink" title="エンド ユーザー体験"></a>エンド ユーザー体験</h2><p>ユーザーが有効な TAP を取得すると、<a href="https://support.microsoft.com/ja-jp/account-billing/%E8%81%B7%E5%A0%B4%E3%81%BE%E3%81%9F%E3%81%AF%E5%AD%A6%E6%A0%A1%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92microsoft-authenticator-%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B-43a73ab5-b4e8-446d-9e54-2a4cb8e4e93c">Authenticator アプリから直接パスワードなしの電話サインイン</a> や、<a href="https://aka.ms/mysecurityinfo">マイセキュリティ情報ページ</a> から FIDO2 キーの追加、さらには Azure AD 参加および Hybrid Azure AD 参加端末での Windows Hello for Business セットアップなど、サインインやセキュリティ情報の登録に使用することができます。MFA が必要なシナリオでは、TAP を追加要素として使用することもできます。</p><p><img src="/blog/azure-active-directory/secure-authentication-method-provisioning-with-temporary-access/image04.png"></p><h2 id="詳細について"><a href="#詳細について" class="headerlink" title="詳細について"></a>詳細について</h2><p>TAP の設定方法については、こちらの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-temporary-access-pass">ドキュメント</a> をご覧ください。</p><p>新入社員のオンボーディング体験は、組織ごとに異なる場合があります。TAP は Microsoft Graph API を通して利用できるため、既存のアプリケーションや <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/app-provisioning/what-is-hr-driven-provisioning">人事主導のプロビジョニング</a> プロセスに組み込むことができます。ニーズに合わせて TAP を構成するためのポリシー API については、<a href="https://docs.microsoft.com/ja-jp/graph/api/resources/temporaryaccesspassauthenticationmethodconfiguration?view=graph-rest-1.0">こちら</a> をご覧ください。</p><h2 id="皆様のご意見をお聞かせください"><a href="#皆様のご意見をお聞かせください" class="headerlink" title="皆様のご意見をお聞かせください"></a>皆様のご意見をお聞かせください</h2><p>TAP があなたのパスワードレスの導入に役立つことを願っています。お試しいただき、質問やフィードバックをお寄せください。</p><p>Tim Larson (<a href="https://twitter.com/tim_c_larson">@tim_c_larson</a>)<br>マイクロソフト アイデンティティ部門<br>シニア プロダクト マネージャー</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 6 月 22 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Graph / MSOnline PowerShell モジュール利用状況の調べ方</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/</id>
    <published>2022-07-11T04:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.238Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 埴山 です。</p><h2 id="Azure-AD-Graph-MSOnline-PowerShell-モジュールの廃止予定"><a href="#Azure-AD-Graph-MSOnline-PowerShell-モジュールの廃止予定" class="headerlink" title="Azure AD Graph / MSOnline PowerShell モジュールの廃止予定"></a>Azure AD Graph / MSOnline PowerShell モジュールの廃止予定</h2><p><a href="/blog/azure-active-directory/azure-ad-change-management-simplified/">Azure AD の変更管理を簡素化します</a> の記事でお伝えしております通り、 MSOnline および Azure AD for Graph (Preview 含む) は 2022 年 12 月 <strong>以降</strong> に廃止が予定されております。改めて廃止が予定されているモジュールは、以下の通りです。</p><table><thead><tr><th align="left">名前</th><th align="left">モジュール名</th><th align="left">プレフィックス</th><th align="left">コマンド例</th></tr></thead><tbody><tr><td align="left">MSOnline (Azure AD v1)</td><td align="left">MSOnline</td><td align="left">Msol</td><td align="left">Connect-MsolService, Get-MsolUser</td></tr><tr><td align="left">Azure AD for Graph (Azure AD v2)</td><td align="left">AzureAD</td><td align="left">AzureAD</td><td align="left">Connect-AzureAD, Get-AzureADUser</td></tr><tr><td align="left">Azure AD for Graph preview (Azure AD v2 preview)</td><td align="left">AzureADPreview</td><td align="left">AzureAD</td><td align="left">Connect-AzureAD, Get-AzureADUser</td></tr></tbody></table><p>これらのモジュールを利用しているすべてのお客様は、Microsoft Graph API への移行を検討いただく必要がございます。</p><h2 id="モジュールを利用しているかの確認方法"><a href="#モジュールを利用しているかの確認方法" class="headerlink" title="モジュールを利用しているかの確認方法"></a>モジュールを利用しているかの確認方法</h2><p>最近、廃止されるモジュールを利用しているか Azure AD のログから確認する方法はないかとのお問合せを多く頂きます。ただ、残念ながら Azure AD のログからすべての利用履歴を精査することはできません。</p><h3 id="スクリプトの内容を確認する"><a href="#スクリプトの内容を確認する" class="headerlink" title="スクリプトの内容を確認する"></a>スクリプトの内容を確認する</h3><p>モジュールを利用しているか正確に確認する唯一の方法は、実際に利用されておりますスクリプトの内容を精査する方法です。</p><p>MSOnline PowerShell (以下 Msol) モジュール, Azure AD for Graph (以下 AzureAD) モジュールの利用箇所についてはお客様環境で利用しているスクリプトなどの精査が必要です。<br>具体的には AzureAD および MSOL モジュール利用時には、必ず以下のいずれかのコマンドで Azure AD に認証を行います。(大文字小文字は区別しません)</p><p>Connect-MsolService<br>Connect-AzureAD</p><p>従って、これらのコマンドを業務で利用していないか、これらのコマンドが含まれているバッチファイルが存在しないかなどを精査することが有効です。</p><p>しかしながら、スクリプトの精査が難しい場合や、棚卸の補助として Azure AD に保存されたサインイン ログから一部の利用履歴や、該当する可能性のあるログを抽出することが可能です。<br>抽出されたログの IP アドレスや利用ユーザーなどから、利用元のマシンやシステムを推測することを検討ください。</p><h3 id="サインイン-ログからスクリプトが使われているか確認する"><a href="#サインイン-ログからスクリプトが使われているか確認する" class="headerlink" title="サインイン ログからスクリプトが使われているか確認する"></a>サインイン ログからスクリプトが使われているか確認する</h3><p>ユーザーの資格情報を利用しモジュールを利用する場合、利用履歴が Azure AD のログに記録されます。(例 1, 2)<br>これらのログは Azure AD のサインイン ログからアプリケーション Azure Active Directory PowerShell (AppId: 1b730954-1685-4b74-9bfd-dac224a7b894) を絞り込むことで確認が可能です。(AzureAD, MSOL のいずれも同じアプリとして表示され区別はつきません)</p><h4 id="例1-対話的な認証を実施しサインインしている場合"><a href="#例1-対話的な認証を実施しサインインしている場合" class="headerlink" title="例1. 対話的な認証を実施しサインインしている場合"></a>例1. 対話的な認証を実施しサインインしている場合</h4><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># オプションなしで実行</span></span><br><span class="line"><span class="built_in">Connect-AzureAD</span></span><br><span class="line"><span class="built_in">Connect-MsolService</span></span><br></pre></td></tr></table></figure><h4 id="例2-埋め込まれたユーザー名パスワードを利用してサインインしている場合"><a href="#例2-埋め込まれたユーザー名パスワードを利用してサインインしている場合" class="headerlink" title="例2. 埋め込まれたユーザー名パスワードを利用してサインインしている場合"></a>例2. 埋め込まれたユーザー名パスワードを利用してサインインしている場合</h4><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># UPN を含む Credential を指定</span></span><br><span class="line"><span class="variable">$password</span> = <span class="built_in">ConvertTo-SecureString</span> <span class="string">&#x27;SecurePassword&#x27;</span> <span class="literal">-AsPlainText</span> <span class="literal">-force</span>;</span><br><span class="line"><span class="variable">$cred</span> = <span class="built_in">New-Object</span> System.management.Automation.Pscredential(<span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Connect-MsolService</span> <span class="literal">-Credential</span> <span class="variable">$cred</span>;</span><br><span class="line"><span class="built_in">Connect-AzureAD</span> <span class="literal">-Credential</span> <span class="variable">$cred</span> <span class="literal">-TenantId</span> <span class="variable">$tenantId</span></span><br></pre></td></tr></table></figure><p>例 1, 2 の場合サインインログは “Azure Active Directory PowerShell” (AppId:<br>1b730954-1685-4b74-9bfd-dac224a7b894)  のアプリ名にて記録されます。</p><p>つまり Azure ポータルの<a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/SignIns">サインイン ブレード</a> にて、フィルターにアプリケーションを追加後 <code>1b730954-1685-4b74-9bfd-dac224a7b894</code> のアプリ ID 入力し絞り込むことで、利用者の特定が可能です。</p><p><img src="/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/01_filtering.png" alt="アプリ名でフィルタリング"></p><p><img src="/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/02_interactive_signin.png" alt="サインイン ログの例"></p><div class="alert is-info"><p class="alert-title">Note</p><p>例 2 の場合はユーザーのサインイン (非対話) に記録される場合があります。</p></div><p><img src="/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/03_noninteractive_signin.png" alt="非対話型ログの例"></p><div class="alert is-info"><p class="alert-title">Note</p><p>バッチ処理に組み込まれたシステムユーザーの場合、どのマシンで実行しているかの情報は残念ながら確認できないので、IP アドレスや時間などから、利用されているマシンやシステムを特定できないか検討ください。</p></div><h4 id="例3-サービス-プリンシパルの資格情報を利用"><a href="#例3-サービス-プリンシパルの資格情報を利用" class="headerlink" title="例3. サービス プリンシパルの資格情報を利用"></a>例3. サービス プリンシパルの資格情報を利用</h4><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzureAD</span> <span class="literal">-TenantId</span> <span class="variable">$tenantId</span> <span class="literal">-ApplicationId</span> <span class="variable">$appId</span> <span class="literal">-CertificateThumbprint</span> <span class="variable">$thumb</span></span><br></pre></td></tr></table></figure><p>AzureAD モジュールではアプリの資格情報を利用する例もあり、バッチ処理では一般にこちらの方式をお勧めしておりました。</p><p>例 3 のようにアプリケーション ID を指定したサインインでは、お客様が登録したアプリの ID で認証が実施され、サインイン ログ上は認証に利用したアプリケーションの情報のみが記録されます。結果、モジュールを利用していない認証と区別がつきませんので、Azure AD 側のログからは特定が困難です。</p><p>例えば、以下のようなコマンドにて Azure AD に接続を実施したとします。(07e819fe-9ab3-4dc5-9e9a-89ecd77b828e はアプリケーション ID です)</p><p>Connect-AzureAD -ApplicationId 07e819fe-9ab3-4dc5-9e9a-89ecd77b828e -TenantId $tenantId -CertificateThumbprint $certThumb</p><p>この場合、サインイン ログは [Azure Active Directory] &gt; [サインイン ログ] &gt; [サービス プリンシパルのサインイン] に記録されます。</p><p>具体例は以下の通りで、アプリケーション ID は Connect-AzureAD コマンドで指定したものが、アプリケーション名は、お客様が登録したアプリ名で記録されます。(下記例では Connect-AzureAD as app というアプリ名のアプリを作成しています)</p><p><img src="/blog/azure-active-directory/how-to-determine-depreacated-azuread-msol/04_serviceprincipal_signin.png" alt="サービス プリンシパルでのサインイン"></p><p>唯一、見分け方として、Connect-AzureAD での接続時に記録されるサインインログの “リソース” プロパティ は Windows Azure Active Directory となる点が挙げられます。<br>ただ Connect-AzureAD 以外でもこの値が記録される可能性があるため、上記ログが必ずしも Connect-AzureAD での利用とは限らない点にご留意ください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>Msol, Azure AD モジュールは、2022 年 12 月以降に廃止予定です。モジュールが利用されているかを特定するには、Connect-MsolService, Connect-AzureAD コマンドを実行しているか、バッチ処理に含まれるかを精査することが最も有効です。</p><p>サインインログから調査する場合、Connect-MsolService と Connect-AzureAD コマンドの認証ログは</p><ul><li>対話的なサインイン ログと非対話型のサインインログではアプリケーション “Azure Active Directory PowerShell” のログが該当する</li><li>サービス プリンシパルでのサインイン ログでは リソース プロパティが “Windows Azure Active Directory” のログに含まれる <strong>可能性がある</strong></li></ul><p>これらのログから、利用ユーザーやバッチ処理の特定を検討ください。</p><p>引き続き、本ブログでは廃止予定のモジュールの移行方法に関して発信していきます。<br>ご不明な点等ございましたら、是非弊社サポートサービスをご利用ください。</p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h2><h3 id="Connect-AzureAD-の-AadAccessToken-オプションまたは-MsAccessToken-を利用して接続しているログを特定する方法はないでしょうか"><a href="#Connect-AzureAD-の-AadAccessToken-オプションまたは-MsAccessToken-を利用して接続しているログを特定する方法はないでしょうか" class="headerlink" title="Connect-AzureAD の -AadAccessToken オプションまたは -MsAccessToken を利用して接続しているログを特定する方法はないでしょうか"></a>Connect-AzureAD の -AadAccessToken オプションまたは -MsAccessToken を利用して接続しているログを特定する方法はないでしょうか</h3><p>それぞれのオプションでは Azure AD Graph API, Microsoft Graph API に対するアクセス トークンを指定します。アクセス トークンの取得方法によりログの出力が異なりますので、サインインログから特定することは困難です</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 埴山 です。&lt;/p&gt;
&lt;h2 id=&quot;Azure-AD-Graph-MSOnline-PowerShell-モジュールの廃止予定&quot;&gt;&lt;a href=&quot;#Azure-AD-Graph-MSOnline-PowerS</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="PowerShell" scheme="https://jpazureid.github.io/blog/tags/PowerShell/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の変更管理のアナウンス (2022 年 6 月分)</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/Microsoft-Entra-change-announcements-June-2022-train/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/Microsoft-Entra-change-announcements-June-2022-train/</id>
    <published>2022-07-10T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:18.950Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2022 年 06 月 30 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-azure-ad-blog/microsoft-entra-change-announcements-june-2022-train/ba-p/2967455">Microsoft Entra change announcements - June 2022 train</a> を意訳したものになります。</p><hr><p>皆さん、こんにちは。</p><p>2022 年 3 月に、お客様がより展開の計画を立てやすくするよう、簡素化された変更管理プロセスを発表しました。今月 (6 月) の初めに、RSA カンファレンスにて、Microsoft の ID およびアクセス機能のすべてを包含する新しい製品群として Microsoft Entra を発表しました。本日、変更管理プロセスを拡張し、Microsoft Entra のすべてでこの新しいプロセスが適用されるようになることをお伝えいたします。また、機能の変更および既存の動作に影響を与える変更について、 6 月分の状況についてもお知らせします。</p><p>これらの変更は、四半期ごとに、ブログ、リリース ノート、そして電子メールにてお客様にお伝えしていきます。また、お客様が、Entra ポータル内でライフ サイクルの変更 (廃止予定、廃止、および既存の動作に影響を与える変更) により簡単に取り組めるよう、継続して取り組んでいます。以下に、「年 2 回の製品の廃止」および「年 4 回の機能変更および既存の動作に影響を与える変更」の連絡予定について情報をまとめたものを記載します。</p><table><thead><tr><th><strong>カテゴリ</strong></th><th><strong>定義</strong></th><th><strong>連絡の予定</strong></th></tr></thead><tbody><tr><td>製品の廃止の連絡</td><td>機能、性能、または製品を特定の期間後に廃止することを指します。これは、一般的に、新たなお客様に対してサービスや機能の提供を停止し、廃止した機能や性能を強化するための技術的面での投資を削減することを伴います。最終的には、すべてのお客様に対してサービスや機能の提供を停止し、EOL (end-of-life) を意味します。</td><td>年に 2 回 (3 月、9 月)</td></tr><tr><td>製品の機能変更および既存の動作に影響を与える変更のお知らせ</td><td><strong>既存の動作に影響を与える変更</strong>: 継続的な運用のためにお客様が何らかの操作や変更を行わない場合、既存のユーザーおよびパートナー体験に影響が生じると想定される変更です。<br><strong>機能の変更</strong>: 既存の ID の機能に対する変更であり、お客様側での作業は必要はありませんが、ユーザー体験に変化が生じます。多くは、UI/UX (ユーザー インターフェイスおよびユーザー体験) への変更です。<br><br>これらの変更は一般的に頻繁に発生するため、より頻繁に弊社からの通知が必要となります。</td><td>年に 4 回 (3 月、6 月、9 月、11 月)</td></tr></tbody></table><p>以下に、2022 年 6 月分として発表された機能変更の一覧をご紹介します。  </p><h2 id="アプリの構成におけるアクセス許可の最大数"><a href="#アプリの構成におけるアクセス許可の最大数" class="headerlink" title="アプリの構成におけるアクセス許可の最大数"></a>アプリの構成におけるアクセス許可の最大数</h2><p>マイクロソフトでは、直近でアプリ登録にて構成できるアクセス許可の最大数について、弊社が定めた制限が適用されるよう変更しました。この制限を超えたアプリはアクセス許可に対する同意を行うことができず、動作しない状態となります。2022 年 10 月 31日より、”requiredResourceAccess” 属性にすでに 400 以上アクセス許可を構成されているアプリは、この制限値以上のアクセス許可を追加することができなくなる予定です。現在アプリにすでに構成されているアクセス許可は維持されますが、新たにアクセス許可を追加するためには、合計数が弊社にて定められた制限値以下となるよう、アプリの所有者にて既存のアクセス許可を削除する必要があります。この対応を行うことで、お客様がアクセス許可に同意できずアプリが利用できない状態になることを回避可能となります。詳細については、<a href="https://docs.microsoft.com/ja-jp/graph/permissions-reference#limits-on-requested-permissions-per-app">アプリごとの要求されたアクセス許可の制限</a> および <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/supported-accounts-validation">サポートされているアカウントの種類別の検証の相違点</a> をご参照ください。   </p><h2 id="Directory-AccessAsUser-All-における管理者の同意について"><a href="#Directory-AccessAsUser-All-における管理者の同意について" class="headerlink" title="Directory.AccessAsUser.All における管理者の同意について"></a>Directory.AccessAsUser.All における管理者の同意について</h2><p>2022 年 8 月 31 日より、すべてのサービスにおいて、”Directory.AccessAsUser.All” に対して、既定で管理者の同意を要求するようになります。Azure AD Graph (graph.windows.net) および Microsoft Graph (graph.microsoft.com) のいずれにおいてもアクセス許可が要求された場合は既定で管理者の同意が必要になります。以前は、特定のシナリオでは、既定で本アクセス許可に対して管理者の同意は不要でした。この変更は、新たな同意の要求にのみ影響し、セキュリティを向上させるとともに、”Directory.AccessAsUser.All” の挙動を現在のドキュメントの動作に合わせるものです。詳細については、<a href="https://docs.microsoft.com/ja-jp/previous-versions/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes">アクセス許可スコープ</a> をご参照ください。  </p><h2 id="グループ-メール"><a href="#グループ-メール" class="headerlink" title="グループ メール"></a>グループ メール</h2><p>グループ関連のメール送信が、より新しく、向上したサービスに切り替わります。以下のシナリオにおけるグループ関連のメールは従来のままですが、新しいエイリアス (<a href="mailto:&#x6d;&#x73;&#x67;&#x72;&#x6f;&#x75;&#x70;&#115;&#x74;&#x65;&#97;&#109;&#64;&#109;&#x69;&#99;&#x72;&#111;&#x73;&#x6f;&#x66;&#x74;&#x2e;&#99;&#111;&#x6d;">&#x6d;&#x73;&#x67;&#x72;&#x6f;&#x75;&#x70;&#115;&#x74;&#x65;&#97;&#109;&#64;&#109;&#x69;&#99;&#x72;&#111;&#x73;&#x6f;&#x66;&#x74;&#x2e;&#99;&#111;&#x6d;</a>) から送信されるようになります:</p><ul><li>Microsoft 365 グループの有効期限が切れる時</li><li>ユーザーが Microsoft 365 グループ またはセキュリティ グループへの参加を要求する時</li><li>グループの所有者が、Microsoft 365 グループ またはセキュリティ グループへの参加リクエストに応答する時</li></ul><p>この変更により、信頼性が向上し、より速いグループ メールの配信と高いスケーラビリティが実現します。  </p><h2 id="既定の同意設定"><a href="#既定の同意設定" class="headerlink" title="既定の同意設定"></a>既定の同意設定</h2><p>2022 年 9 月 30 日より、すべての新規テナントに対して、新たな既定の同意設定として「マイクロソフトの最新の推奨設定」が強制されるようになります。エンド ユーザーは、マイクロソフトが定めた低影響のアクセス許可を超えてアクセス許可を要求するマルチテナント アプリに対して、発行元が検証済みでない場合は、同意を付与することができなくなります。この変更により、悪意のあるアプリが、ユーザーを騙して組織のデータへのアクセスを許可させようとするリスクが軽減されます。</p><p>いつものように、お客様のフィードバックや提案をお寄せください。Azure Active Directory Identity Blog のコメント欄や <a href="https://feedback.azure.com/d365community/forum/22920db1-ad25-ec11-b6e6-000d3a4f0789">Azure AD フィードバックフォーラム</a> でご意見をお聞かせください。また、質問、進行中の問題、機能のリクエストは、Microsoft Q&amp;A で #AzureADChangeManagementJune2022Train のタグを付けてお送りください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 06 月 30 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>アプリとサービス向けの ID の管理、ガバナンス、保護</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/managing-governing-and-securing-identities-for-apps-and-services/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/managing-governing-and-securing-identities-for-apps-and-services/</id>
    <published>2022-07-03T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.314Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 6 月 9 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/managing-governing-and-securing-identities-for-apps-and-services/ba-p/3402816">Managing, governing, and securing identities for apps and services</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>お客様とお話をしていると、条件付きアクセスや Identity Protection、ID ガバナンスなど、ユーザーを保護するための Azure Active Directory (Azure AD) の主要な機能について、深く掘り下げ解説することがよくあります。多くのお客様にとって、これらの機能をあらゆる ID に適用することは、ゼロ トラストを推進し、ビジネスを保護するための戦略において非常に重要であることを認識しています。  </p><p>この度、Microsoft Entra ワークロード ID を発表できることを大変嬉しく思っています。この全く新しい機能は、ユーザー向けに組織が使用しているものをワークロード ID に合わせたて応用したものです。  </p><h2 id="ワークロード-ID-とは何ですか？"><a href="#ワークロード-ID-とは何ですか？" class="headerlink" title="ワークロード ID とは何ですか？"></a>ワークロード ID とは何ですか？</h2><p>Microsoft Entra の ID およびアクセス管理ソリューションでは、ID はユーザーだけではありません。Azure AD を含む Microsoft Entra では、従業員やパートナー、顧客といった人間の ID だけでなく、人間以外の (あるいは機械の) ID のアクセス管理も支援します。例えば、デバイスの ID や、アプリやサービスの ID が含まれ、これらは業界では「ワークロード ID」と呼ばれ始めています。Microsoft Entra では、ワークロード ID にはアプリケーションとサービス プリンシパルが含まれます。  </p><p><img src="/blog/azure-active-directory/managing-governing-and-securing-identities-for-apps-and-services/sdriggers_0-1654268125171.png" alt="Microsoft Entra における ID の種類"></p><h2 id="なぜワークロード-ID-の管理が重要なのか？"><a href="#なぜワークロード-ID-の管理が重要なのか？" class="headerlink" title="なぜワークロード ID の管理が重要なのか？"></a>なぜワークロード ID の管理が重要なのか？</h2><p>ユーザー ID と同じように、ワークロード ID は有用であると同時に、攻撃の対象となるものでもあります。ワークロード ID は、企業の最も重要なリソースにアクセスする可能性があり、悪意ある行為者にとっては、損害を与えたり、被害を拡大させたりするための攻撃対象となりえます。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/manage-apps/protect-against-consent-phishing">同意のフィッシング攻撃</a> のような手口は、悪質なアプリを組織に持ち込む可能性があり、認証情報の漏洩は、攻撃者が既存のアプリケーションやサービスを悪用することを可能にします。このような攻撃は、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/understanding-quot-solorigate-quot-s-identity-iocs-for-identity/ba-p/2007610">最近の有名な事例</a> を含め、実際に確認されています。  </p><p>企業がクラウドの活用を進めるにつれて、ワークロード ID の数は増え続けています。一方でワークロード ID の特性により、企業のユーザーを管理するよりもはるかに管理が難しくなっています。多くの組織は、従業員の人数が増加していくにつれ、適切なアクセスの傾向がどういったものか一般的な知見を持っています。ほとんどの組織では、人事システムが従業員のマスター データとして利用されます。人間のユーザーであれば、パスワードなどの秘密を守るであろうと信頼することができます。しかし、ワークロード ID には、このような利点がほとんどありません。扱いにくく、気が付けば数が増え、優れたライフ サイクル管理の方法もほとんどありません。 また、その行動パターンも予測しにくく、責任の所在も不明確です。  </p><p>これに対して、ユーザー ID の機能を活用する企業も出てきています。組織は、ワークロードをユーザー ID (しばしば「サービス アカウント」と呼ばれます) としてあてはめ、条件付きアクセスのような機能を用いてワークロード ID の安全性を保っています。しかしながら、ワークロード ID の挙動はユーザーとは大きく異なり、異常な挙動にもさまざまなパターンがあるため、これらは解決策として不十分です。それよりも、ワークロード ID のために特別に構築された機能が必要です。</p><h2 id="Microsoft-Entra-ワークロード-ID-の紹介"><a href="#Microsoft-Entra-ワークロード-ID-の紹介" class="headerlink" title="Microsoft Entra ワークロード ID の紹介"></a>Microsoft Entra ワークロード ID の紹介</h2><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/workload-identities-overview">ワークロード IDの包括的な機能セット</a> を紹介します。すでにパブリック プレビューで多くのお客様にお試しいただいている機能も以下に含まれています。運用環境での使用が可能になったのは、以下の 3 つです。</p><ul><li><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/workload-identities-overview">ワークロード ID の条件付きアクセス</a>: ワークロードがリソースにアクセスする際の条件 (IP アドレス範囲など) を定義するポリシーを設定することができます。</p></li><li><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-workload-identity-risk">ワークロード ID の Identity Protection</a>: 異常な振る舞いやその他のシグナルに基づいて、リスクの高いワークロード ID を特定 (およびブロック) するのに役立ちます。</p></li><li><p><a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-azure-ad-access-reviews-for-service-principals/">特権的なロールに割り当てられたワークロード ID のアクセス レビュー</a>: 特に高い特権的アクセスを監視することができます。</p></li></ul><p>また、組織がワークロード ID の全体像をよりよく理解できるようにするため、より新しい機能についても開発に取り組んでいます。最近使用されていない ID を特定し、削除する可能性がある機能です。これは、組織が自社の資産と攻撃対象領域を適切に評価するために、不可欠な機能です。  </p><p>ユーザー ID と同様、この新機能は ID 単位でライセンスされるため、組織は保護する必要のあるワークロード ID に合わせて使用状況を調整することができます。この新しいサービスは、今年後半に購入可能となる予定です。  </p><p>本日ご紹介した内容は、ワークロード ID を使用して組織の生産性と安全性を維持するために、私たちが構築していることのほんの始まりに過ぎません。 お客様とともに歩みを進め、フィードバックを頂戴できることを楽しみにしています。  </p><p>Ilana Smith<br>Group Product Manager<br>Azure Active Directory<br>@ilanas</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 6 月 9 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>アクセス パッケージを利用した一括でのアクセス権の管理</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/access-management-with-access-package/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/access-management-with-access-package/</id>
    <published>2022-07-03T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:18.966Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure ID チームの小出です。</p><p>今回は、アクセス パッケージを利用した一括アクセス権管理について紹介します。</p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>多くのお客様のテナントでは、外部のユーザーが自社テナントの SharePoint サイトを閲覧したり Teams のチームに参加したりできるように、ゲスト ユーザーの招待機能を利用されていることと思います。また、ゲストとのコラボレーション機能をまだ活用いただいていないテナントでも、入社や退職に伴って多くのユーザーを追加および削除したり、これに伴いアクセス権を付与もしくは剥奪したりといった管理作業を実施いただいているかと思います。  </p><p>これらのタスクを実施する管理者の方の中には、以下のような困りごとをお持ちの方もいるのではないでしょうか。</p><ul><li>一括招待機能はあるものの、大量のユーザーを招待するため、CSV ファイルを作成するのに時間と手間がかかる</li><li>招待したユーザーから、招待メールが届かないといったお問い合わせが多く対応しきれない</li><li>ゲストを招待したあと、ゲストに Sharepoint や Teams などのアクセス権を割り当てなければならず面倒である</li><li>不要になったアクセス権の剥奪を忘れてしまうことがある</li><li>新入社員が入ってきたときに、アクセス権を一つずつ付与するのが大変である</li></ul><p>このような困りごとに対しては、Azure AD のアクセス パッケージ機能を活用することで、ゲスト招待や必要なアクセス権の付与もしくは剥奪を一括して行うことが出来るようになり、より管理者側の負荷を減らすことが可能です。</p><p>アクセス パッケージは、Azure AD Premium P2 ライセンスで使用できる機能となりますため、PIM や Identity Protection の機能を利用するために P2 ライセンスをお持ちのお客様は、追加の費用負担なく利用することができます。    </p><p>今回は、アクセス パッケージの概要と、具体的な活用方法についての 2 つのシナリオをご紹介します。</p><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ul><li>A. アクセス パッケージでできること  </li><li>B. アクセス パッケージの活用実例紹介  <ul><li>B-1. プロジェクトに参加する外部のユーザーに対して短・中期的なアクセス許可を付与する  </li><li>B-2. 新入社員対応など社内のユーザーへの長期的なアクセス許可を付与する  </li></ul></li></ul><h2 id="A-アクセス-パッケージでできること"><a href="#A-アクセス-パッケージでできること" class="headerlink" title="A. アクセス パッケージでできること"></a>A. アクセス パッケージでできること</h2><p>アクセス パッケージはその名のとおり、様々なアクセス権をまとめたパッケージのようなものです。</p><h3 id="アクセス-パッケージで利用可能なリソース"><a href="#アクセス-パッケージで利用可能なリソース" class="headerlink" title="アクセス パッケージで利用可能なリソース"></a>アクセス パッケージで利用可能なリソース</h3><p>具体的には以下のようなリソースのアクセス権をまとめて適用することが可能です。  </p><h4 id="グループとチーム"><a href="#グループとチーム" class="headerlink" title="グループとチーム"></a><span style="color: blue; ">グループとチーム</span></h4><p>アクセス パッケージが割り当てられたユーザーは、指定したグループに自動的に追加されます。アクセス権には所有者とメンバーがあり、どちらを割り当てるかもあらかじめ指定可能です。また、セキュリティ グループが Azure ロール (サブスクリプション A の共同作成者など) や Azure AD ロール（ユーザー管理者など）を持っていた場合、間接的に当該ロールの管理者特権もユーザーに付与することができます。指定したグループが Microsoft 365 グループの場合、Teams チャンネルのアクセス権も付与することが可能です。  </p><h4 id="アプリケーション"><a href="#アプリケーション" class="headerlink" title="アプリケーション"></a><span style="color: blue; ">アプリケーション</span></h4><p>指定したエンタープライズ アプリケーションに対して、ユーザーを割り当てることができます。エンタープライズ アプリケーションを活用すると、外部のアプリケーション (Salesforce、Slack、GitHub など) と SAML シングル サインオンやユーザー プロビジョニングを行うことが可能になります。</p><p>SAML シングル サインオンやユーザー プロビジョニングの対象ユーザーは、 [エンタープライズ アプリケーション] - [ユーザーとグループ] の項目より管理者が個別に割り当てることもできますが、アクセス パッケージに事前にエンタープライズ アプリケーションを追加しておくと、この手動作業を行う必要がなくなり、パッケージを割り当てられたユーザーは、自動でエンタープライズ アプリケーションへの割り当てが行われます。</p><h4 id="SharePoint-サイト"><a href="#SharePoint-サイト" class="headerlink" title="SharePoint サイト"></a><span style="color: blue; ">SharePoint サイト</span></h4><p>指定した SharePoint サイトへのアクセス権を追加することが可能です。アクセス パッケージを割り当てられたユーザーは、自動で Sharepoint サイトへアクセスできるようになります。</p><p>なお、 SharePoint サイトのアクセス権には、所有者、閲覧者、メンバーの 3 つがあります。ユーザーに SharePoint サイトのどのアクセス権を割り当てるかについても、あらかじめ指定することが可能です。</p><h3 id="アクセスパッケージを利用するメリット"><a href="#アクセスパッケージを利用するメリット" class="headerlink" title="アクセスパッケージを利用するメリット"></a>アクセスパッケージを利用するメリット</h3><p>ここで、アクセス パッケージを使う前後で管理者の負担がどのように軽減されるかや、アクセス パッケージを利用することでいかに効率的にアクセス権のライフサイクルを管理できるかを、一例を挙げて説明します。  </p><p>たとえば contoso テナントでは、外部企業の利用者をゲスト ユーザーとして招待しています。このゲストには、contoso テナントの開発プロジェクトに一時的に参加してもらいます。</p><p>多くのお客様の環境では、まずゲスト ユーザーを contoso テナントに招待した後、ゲストが SharePoint、Teams、サブスクリプション リソース (AppService など) にアクセスできるように、アクセス許可を別途設定していると思います。そして開発プロジェクトが終了した際には、ゲスト ユーザーからアクセス権の剥奪を行います。</p><p>該当するユーザーが 1 人の場合は手動でアクセス許可を付与することもできますが、該当するユーザーが 20 人や 30 人と増えるほど、上述した「ゲスト招待」や「アクセス権の付与」、「アクセス権の剥奪」といった 3 つのタスクの負荷は大きくなります。作業負荷が大きくなるだけでなく、「アクセス権の付与」を忘れてしまった場合は、開発フェーズでトラブルとなったり、「アクセス権の剥奪」を忘れてしまった場合はセキュリティ的な懸案につながります。</p><p><img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package1.png"></p><p>アクセス パッケージを使用すると、上記に記載した ３つのタスクへの対応が不要になり、管理者側のタスクは、「ユーザーが要求したパッケージを承認する」フロー 1 つのみとなります。具体的には、以下のような流れとなります。</p><ol><li>「アクセス権の付与」を行うリソースを事前に 1 つのアクセス パッケージにまとめ、アクセス パッケージの URL を外部ユーザーに公開します。</li><li>外部ユーザーは該当の URL から、アクセス パッケージへの参加を要求します。</li><li>承認制の場合、外部ユーザーによってアクセス パッケージへの参加が要求された際は、承認者にメールで通知が送られます。管理者はそのメールを確認し承認もしくは拒否を行います。</li><li>要求が承認されることで、自動的に「ゲスト招待」が完了し、アクセス パッケージに事前登録されたリソースへの「アクセス権付与」が行われます。</li><li>最後に、アクセス パッケージの有効期限が切れることで、自動的にパッケージ内の全てのリソースに対する「アクセス権の剥奪」が行われます。併せて、事前に設定しておけば、ゲスト アカウントを自動的にブロックし、削除することも可能です。</li></ol><p><img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package2.png"></p><h2 id="B-アクセス-パッケージの活用実例紹介"><a href="#B-アクセス-パッケージの活用実例紹介" class="headerlink" title="B. アクセス パッケージの活用実例紹介"></a>B. アクセス パッケージの活用実例紹介</h2><p>上記では、アクセス パッケージでどのようなことができるかについて簡単に記載しましたが、ここからは具体的な活用方法について案内します。</p><p>アクセス パッケージの活用シナリオは大きく分けて以下の 2 つが考えられるので、それぞれの設定をおすすめレシピのように紹介します。  </p><h3 id="B-1-プロジェクトに参加する外部のユーザーに対して短・中期的なアクセス許可を付与する"><a href="#B-1-プロジェクトに参加する外部のユーザーに対して短・中期的なアクセス許可を付与する" class="headerlink" title="B-1. プロジェクトに参加する外部のユーザーに対して短・中期的なアクセス許可を付与する"></a>B-1. プロジェクトに参加する外部のユーザーに対して短・中期的なアクセス許可を付与する</h3><p>プロジェクト単位でアクセス パッケージを作成し、プロジェクトに参加する外部ユーザーが、アクセス パッケージを要求するシナリオです。アクセス パッケージを管理者が承認すれば、そのユーザーには SharePoint へのアクセス権など、事前に設定されたリソースへのアクセス許可が割り当てられます。  </p><p>今回は、下記シナリオをもとに、設定方法を以下のとおり案内します。  </p><ul><li>1 年間の短中期的な開発プロジェクトが発足し、開発メンバーにはテナントに存在する社内メンバーのほかに、外部ベンダーも加わることになった</li><li>まだテナントに招待されていない外部ユーザー向けに、アクセス パッケージを作成して「招待」と「アクセス権の付与」を一括管理して行いたい</li><li>プロジェクト終了時には「アクセス権の剥奪」やゲスト アカウントの削除を自動的に行いたい</li><li>プロジェクトのソース コードは GitHub エンタープライズで管理を行い、成果物はサブスクリプションの App Service に展開したい</li><li>プロジェクト中のコミュニケーションには Teams や SharePoint を利用したい</li></ul><p><img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package3.png"></p><h4 id="Phase-0-事前準備"><a href="#Phase-0-事前準備" class="headerlink" title="Phase 0: 事前準備"></a><span style="color: blue; ">Phase 0: 事前準備</span></h4><h5 id="カタログの作成"><a href="#カタログの作成" class="headerlink" title="カタログの作成"></a>カタログの作成</h5><p>事前にプロジェクトで利用できるリソースをカタログにまとめておきましょう。下記のようなカタログ作成が考えられます。</p><ul><li>企業が連携している外部アプリケーション (Salesforce、Slack、GitHub など) を全て含んでおく</li><li>プロジェクト毎に作成された全てのグループ (ProjectA_Team、ProjectB_Team) を含んでおく</li><li>プロジェクト毎に作成された全ての SharePoint サイト (ProjectA_Site、ProjectB_Site) を含んでおく</li></ul><p>のちのアクセス パッケージ作成フェーズでは、事前にカタログで定義されたリソースのみを追加することになるので、リソースの指定間違いなどを防止することができます。</p><h5 id="接続されている組織の設定"><a href="#接続されている組織の設定" class="headerlink" title="接続されている組織の設定"></a>接続されている組織の設定</h5><p>外部ベンダーのテナントを、事前に “接続されている組織” に追加します。”接続されている組織” は分かりやすくいうと、「自分のテナントと関係のある組織」の一覧です。</p><p>アクセス パッケージを作成するときには、「そのパッケージを誰が要求できるか設定する項目」があります。”接続されている組織” にテナントを追加すると、追加されたテナントに所属するユーザーは、設定に応じそのパッケージを要求できるようになります。後の手順をスムーズに行えるよう、事前に登録しておきましょう。</p><p>接続されている組織の追加手順につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-organization#add-a-connected-organization">接続されている組織の追加の公開情報</a> の手順をご覧ください。また、テナントを追加した後は、それぞれのテナントの代表者 (連絡先となるユーザー) を、内部スポンサーおよび外部スポンサーとして登録します。</p><h5 id="外部ユーザーのライフサイクルを設定"><a href="#外部ユーザーのライフサイクルを設定" class="headerlink" title="外部ユーザーのライフサイクルを設定"></a>外部ユーザーのライフサイクルを設定</h5><p>アクセス パッケージの有効期限が切れ、外部ユーザーが全てのアクセス権割り当てを剥奪された後、外部ユーザーをどのように扱うか設定できます。</p><p>「外部ユーザーによるこのディレクトリへのサインインをブロックする」を “はい” にすると、アクセス権の剥奪後、外部ユーザーはアクセス パッケージ提供元のテナントにサインインできなくなります。<br>また「外部ユーザーを削除」を “はい” に設定し、「このディレクトリから外部ユーザーを削除するまでの日数」を設定すれば、上記でサインインがブロックされるようになってから指定した日数経過後に、ゲスト アカウント自体を自動的に削除することもできます (ただしこの設定は、アクセス パッケージ経由で追加されたゲストに対してのみ適用される点に注意ください。通常のゲスト招待フローで招待されたユーザーは対象外です)。</p><p><img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package4.png"></p><h4 id="Phase-1-導入"><a href="#Phase-1-導入" class="headerlink" title="Phase 1: 導入"></a><span style="color: blue; ">Phase 1: 導入</span></h4><p>アクセス パッケージの作成を行うフェーズです。</p><p>アクセス パッケージ管理が最も効果的に活用できるのは、新規プロジェクトの立ち上げ時です。今後プロジェクトに参加するユーザーがアクセスするグループ、SharePoint サイト、アプリケーションを事前にアクセス パッケージとしてまとめておき、誰がこのパッケージを要求できるのかなどをポリシーとして定義します。このフェーズであらかじめ決めておくべきことがいくつかありますが、このフェーズをしっかり設計しておけば、プロジェクトが進むにつれ関係者が増えてきた場合でも、管理者は「要求されたアクセス パッケージを承認する」だけで済みます。  </p><p>今回のシナリオでは、以下のように設定します。</p><table><thead><tr><th>項目</th><th>設定</th></tr></thead><tbody><tr><td>[基本] タブ</td><td>アクセス パッケージの名前と説明を入力します。<br>利用するカタログとして事前に作成したカタログを指定します。</td></tr><tr><td>[リソース ロール] タブ</td><td>アクセス パッケージを要求したユーザーにカタログ内のどのリソースのアクセス権を付与するか決定します。<br><br>・グループとチーム<br>ProjectA_Team のグループを指定します。<br><br>・アプリケーション<br>GitHub Enterprise Cloud - Enterprise Account を指定します。<br><br>・Sharepoint サイト<br>ProjectA_Site を指定します。</td></tr><tr><td>[要求] タブ - [アクセス権を要求できるユーザー]</td><td>アクセス パッケージを要求できるユーザーの範囲を決める項目です。今回は以下のように設定します。<br><br>アクセス権を要求できるユーザー: “自分のディレクトリ内以外のユーザーの場合”<br>要求可能な範囲: “構成済みの接続されたすべての組織”</td></tr><tr><td>[要求] タブ - [承認]</td><td>承認制にするか、承認者は誰かを設定する項目です。<br>外部ユーザーが参加するアクセス パッケージの場合、プロジェクトの責任者などが要求を承認する構成にするとセキュリティ上安心です。<br><br>以下のように設定します。<br>承認を要求する: はい<br>要求者の理由を要求する: はい<br>ステージの数: 1<br>第 1 の承認者: 特定の承認者の選択 (プロジェクト責任者などを指定します。)</td></tr><tr><td>[要求] タブ - [有効化]</td><td>以下のように設定します。<br><br>新しい要求を有効にする: はい</td></tr><tr><td>[要求元情報] タブ</td><td>アクセス パッケージを要求するときに、ユーザーに様々な質問をすることができます。この質問を設定する画面です。<br>この項目は必須ではないため、今回は割愛します。</td></tr><tr><td>[ライフサイクル] タブ - [有効期限]</td><td>アクセス パッケージの割り当て有効期限設定を行う項目です。今回は以下のように設定します。<br><br>アクセス パッケージ割り当ての有効期限が切れる: 日付<br>割り当ての有効期限: 2023/3/31 (プロジェクト終了日)<br>ユーザーがアクセス権を延長することを許可する: はい<br>延長を許可するには承認が必要: はい</td></tr><tr><td>[ライフサイクル] タブ - [アクセス レビュー]</td><td>長期間のプロジェクトでは、メンバーが入れ替わることなどもあります。<br>[ライフサイクル] で設定した期間までの間に、定期的にアクセス権のレビューを行うか設定できます。<br>今回は以下のように設定します。<br><br>アクセス レビューが必要: はい<br>開始日: 既定値<br>レビュー頻度: 毎月<br>期間 (日数): 7 日<br>レビュー担当者: セルフ レビュー<br>レビュー担当者が応答しない場合: 推奨事項の実行<br>レビュー担当者の意思決定ヘルパーを表示する: はい<br>レビュー担当者の理由が必要: はい<br> <br>※アクセス レビューについては<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-access-reviews-create">こちら</a>をご参照ください。</td></tr><tr><td>カスタム拡張機能 (プレビュー)</td><td>Logic App などと連携する機能です。必須ではないため今回は割愛します。</td></tr></tbody></table><h4 id="Phase-2-運用"><a href="#Phase-2-運用" class="headerlink" title="Phase 2: 運用"></a><span style="color: blue; ">Phase 2: 運用</span></h4><p>作成したアクセス パッケージを外部ユーザーに割り当てるフェーズです。</p><ol><li><p>管理者は作成したアクセス パッケージの [概要] を開き、マイ アクセス ポータルのリンクを外部ユーザーに共有します。</p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package5.png"></p></li><li><p>共有されたリンクに外部ユーザーがリンクにアクセスすると、アクセス権の要求画面が開きます。アクセス パッケージの [要求] ボタンをクリックすると、以下のように質問や理由の入力画面が表示されるので、必要事項を入力して送信します。</p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package6.png"></p></li><li><p>外部ユーザーがパッケージを要求すると、以下のようなメールが承認者に届きます。承認者はこのリンクをクリックします。</p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package7.png"></p></li><li><p>“承認待ちのアクセス パッケージ要求申請” の一覧が表示されるので、選択して [承認する] をクリックします。</p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package8.png"></p></li><li><p>承認されると、ユーザーにアクセス パッケージが割り当てられます。ユーザーには以下のような承認メールが届きます。  </p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package9.png"></p></li><li><p>アクセス権の付与が完了すると、ユーザーにメールで通知されます。これまで手動で付与していた SharePoint や Teams のアクセス権やグループへの追加作業を、すべて自動化することができます。  </p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package10.png"></p></li><li><p>アクセス パッケージが割り当てられたら、外部ユーザーがリソースへアクセスします。以下の画面で招待を [承諾] すれば、リソースにアクセスすることができます。</p><p> <img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package11.png"></p></li></ol><p>外部ユーザーが上記「承諾」を実施した段階で、自動的にゲスト アカウントが作成され、当該ゲスト アカウントに対してグループ、SharePoint サイト、アプリケーションに対する必要なアクセス権が一括して設定されます。</p><p>アクセス パッケージのメール通知につきましては、 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-process#email-notifications">電子メールによる通知</a> の公開情報も併せてご確認ください。</p><p>また、新しい要求を受け取ったり、パッケージが割り当てられたりすると、監査ログにも記録されます。これにより後から管理者がパッケージの割り当て日時、履歴などを確認することなども可能です。詳細につきましては、 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-reports">こちらの公開情報</a>も併せてご確認ください。</p><h4 id="Phase-3-終了"><a href="#Phase-3-終了" class="headerlink" title="Phase 3: 終了"></a><span style="color: blue; ">Phase 3: 終了</span></h4><p>アクセス パッケージの終了と、割り当てが削除されるフェーズです。プロジェクト完了時がこのフェーズに該当します。  </p><p>アクセス パッケージには有効期限があります。有効期限が切れると、外部ユーザーに付与されていたアクセス パッケージ内のアクセス権限が自動的に一括削除され、これまでアクセスできていた SharePoint サイトや Teams チームにアクセスできなくなります。また、事前設定でゲスト アカウントの自動サインイン ブロックや自動削除を構成しているので、アクセス パッケージ経由で招待されたユーザー アカウント自体も管理できます。これにより「アクセス権が残ったままだった」や「ゲストを削除し忘れてしまった」という状況を回避できるため、セキュリティ上もより安心です。</p><h3 id="B-2-新入社員対応など社内のユーザーへの長期的なアクセス許可を付与する"><a href="#B-2-新入社員対応など社内のユーザーへの長期的なアクセス許可を付与する" class="headerlink" title="B-2. 新入社員対応など社内のユーザーへの長期的なアクセス許可を付与する"></a>B-2. 新入社員対応など社内のユーザーへの長期的なアクセス許可を付与する</h3><p>全社用や部門ごとなどの単位でアクセス パッケージを作成し、社内のユーザーがアクセス パッケージを要求するシナリオです。</p><p>上記と同様、アクセス パッケージを管理者が承認すれば、そのユーザーには SharePoint へのアクセス権など、事前に設定されたアクセス許可が割り当てられます。今回は、以下のシナリオをもとに設定方法を下記にてご案内します。</p><ul><li>社内に新しい部署ができ、従業員が異動することになった。</li><li>毎年新入社員が入ってくるので、入社した時にパッケージを要求してもらい、その後は異動もしくは退職するまで利用できるようにしたい</li></ul><p><img src="/blog/azure-active-directory/access-management-with-access-package/access-management-with-access-package12.png"></p><h4 id="Phase-0-事前準備-1"><a href="#Phase-0-事前準備-1" class="headerlink" title="Phase 0: 事前準備"></a><span style="color: blue; ">Phase 0: 事前準備</span></h4><h5 id="カタログの作成-1"><a href="#カタログの作成-1" class="headerlink" title="カタログの作成"></a>カタログの作成</h5><p>上記では開発プロジェクト用のカタログを作成しましたが、今度は社内用のリソースを別のカタログとしてまとめておきましょう。下記のようなカタログ作成が考えられます。</p><ul><li>部署毎に作成された全てのグループ (SalesGroup, MarketingGroup) を含んでおく</li><li>部署毎に作成された全ての SharePoint サイト (Sales_Site, Marketing_Site) を含んでおく</li></ul><h4 id="Phase-1-導入-1"><a href="#Phase-1-導入-1" class="headerlink" title="Phase 1: 導入"></a><span style="color: blue; ">Phase 1: 導入</span></h4><p>アクセス パッケージの作成を行うフェーズです。</p><p>基本的には先に記載した内容と同様ですが、今回は社内向けにアクセス パッケージを作成するので、”要求できるユーザーの範囲” などの設定が上記と異なります。  </p><table><thead><tr><th>項目</th><th>設定</th></tr></thead><tbody><tr><td>[基本] タブ</td><td>アクセス パッケージの名前と説明を入力します。<br>利用するカタログとして事前に作成したカタログを指定します。</td></tr><tr><td>[リソース ロール] タブ</td><td>アクセス パッケージを要求したユーザーが、どのリソースにアクセスする必要があるかを決定します。<br>具体的には、部署ごとに必要なグループやチーム、 Sharepoint サイトなどを洗い出して設定します。<br><br>・グループとチーム<br>SalesGroup のグループを指定します。<br><br>・Sharepoint サイト<br>Sales_Site を指定します。</td></tr><tr><td>[要求] タブ - [アクセス権を要求できるユーザー]</td><td>アクセス パッケージを要求できるユーザーの範囲を決める項目です。今回は以下のように設定します。<br><br>アクセス権を要求できるユーザー：”自分のディレクトリ内のユーザーの場合”<br>要求可能な範囲： “すべてのユーザー（ゲストを除く）”</td></tr><tr><td>[要求] タブ - [承認]</td><td>承認制にするかどうか、承認者は誰かを設定する項目です。<br>部署の責任者 (課長など) を承認者とすると、不要なユーザーがパッケージを要求しても、承認する前に気が付くことができ安心です。<br><br>以下のように設定します。<br>[承認を要求する]: はい<br>要求者の理由を要求する: はい<br>ステージの数: 1<br>第 1 の承認者: 特定の承認者の選択（部署の責任者などを指定します。）</td></tr><tr><td>[要求] タブ - [有効化]</td><td>以下のように設定します。<br><br>新しい要求を有効にする: はい</td></tr><tr><td>[要求元情報] タブ</td><td>アクセス パッケージを要求するときに、ユーザーに様々な質問をすることができます。この質問を設定する画面です。<br>この項目は必須ではないため、今回は割愛します。</td></tr><tr><td>[ライフサイクル] タブ - [有効期限]</td><td>アクセス パッケージの割り当て有効期限設定を行う項目です。今回は以下のように設定します。<br><br>アクセス パッケージ割り当ての有効期限が切れる: なし</td></tr><tr><td>[ライフサイクル] タブ - [アクセス レビュー]</td><td>内部のユーザーであれば、たとえば退職者のアカウントは削除するなどの運用フローがあるかと思いますが、不要なユーザーにアクセス パッケージが割り当てされ続けていないかを確認することができます。<br>今回は [ライフサイクル] で有効期限を設定していないため、定期的にアクセス権のレビューを行うと安心です。<br>以下のように設定します。<br><br>アクセス レビューが必要: はい<br>開始日: 既定値<br>レビュー頻度: 四半期ごと<br>期間 (日数): 14 日<br>レビュー担当者: セルフ レビュー<br>レビュー担当者が応答しない場合: 推奨事項の実行<br>レビュー担当者の意思決定ヘルパーを表示する: はい<br>レビュー担当者の理由が必要: はい<br><br>※アクセス レビューについては<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-access-reviews-create">こちら</a>をご参照ください。</td></tr><tr><td>カスタム拡張機能 (プレビュー)</td><td>Logic App などと連携する機能です。必須ではないため今回は割愛します。</td></tr></tbody></table><h4 id="Phase-2-運用-1"><a href="#Phase-2-運用-1" class="headerlink" title="Phase 2: 運用"></a><span style="color: blue; ">Phase 2: 運用</span></h4><p>実際にアクセス パッケージを運用し、要求・承認と割り当てが行われるフェーズです。  </p><p>基本的には B-1 のシナリオと同様です。管理者はアクセス パッケージのリンクを新入社員に提示して、新入社員はアクセス権を要求するのみです。  </p><p>新しい要求を受け取ったり、パッケージが割り当てられたりすると、監査ログにも記録されるため、後から管理者がパッケージの割り当て日時や履歴などを確認することなども可能です。詳細につきましては、 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-reports">こちらの公開情報</a>も併せてご確認ください。  </p><h2 id="最後に"><a href="#最後に" class="headerlink" title="最後に"></a>最後に</h2><p>今回は、アクセス パッケージを使用したアクセス権管理について、シナリオごとに紹介させていただきました。アクセス パッケージをご利用いただくと、非常に多くのユーザーや外部ユーザーを管理されているテナントなどでは、管理者の負担を大きく下げることができます。</p><p>Azure AD の機能のなかでも、まだ活用いただいていないお客様も多いかと思いますが、この記事がアクセス権管理の運用改善のきっかけとなれば幸いです。  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、アクセス パッケージを利用した一括アクセス権管理について紹介します。&lt;/p&gt;
&lt;h2 id=&quot;はじめに&quot;&gt;&lt;a href=&quot;#はじめに&quot; class=&quot;headerlink&quot; title=&quot;はじめに&quot;</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Access Package" scheme="https://jpazureid.github.io/blog/tags/Access-Package/"/>
    
    <category term="Entitlement Management" scheme="https://jpazureid.github.io/blog/tags/Entitlement-Management/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD 動的グループで入れ子 (ネスト) グループを作成する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/create-nested-groups-with-azure-ad-dynamic-groups/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/create-nested-groups-with-azure-ad-dynamic-groups/</id>
    <published>2022-06-19T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.142Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2022 年 6 月 6 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/create-quot-nested-quot-groups-with-azure-ad-dynamic-groups/ba-p/3118024">Create “nested” groups with Azure AD Dynamic Groups</a> を意訳したものになります。</p><hr><p>“memberOf” 属性に基づいて動的なグループを作成する機能が、パブリック プレビューで利用可能になったことをお知らせいたします。</p><p>本機能により、他のグループをもとに、動的な Azure AD セキュリティグループや M365 グループを作成することで、グループのメンバーシップをよりよく管理できるようになり、より簡単に階層的なグループを作成できるようになります。例えば、Group-X と Group-Y のメンバーを併せ持つ Dynamic-Group-A を作成することができるようになりました。 </p><p><img src="/blog/azure-active-directory/create-nested-groups-with-azure-ad-dynamic-groups/001.png">  </p><p>動的グループのメンバー定義に使用するグループは、ユーザーやデバイスのセキュリティ グループ、Microsoft 365 のグループ、オンプレミスから同期したグループ、または複数のグループ タイプが混在するグループなど、Azure Active Directory のあらゆるグループ タイプがご利用いただけます。また、既存の入れ子のセキュリティ グループとは異なり、memberOf 属性に基づいた動的グループは、メンバーのフラットな (階層構造のない) リストを返すため、ライセンスの割り当てやアプリケーションの割り当てにご利用いただけます。 </p><p>memberOf 属性の詳細と、この新しい機能を利用する方法につきましては、弊社の<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/groups-dynamic-rule-member-of">公開資料</a>をご覧ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 6 月 6 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcomm</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>パブリッシャー ドメイン (発行元ドメイン) と発行者確認</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/publisher-domain/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/publisher-domain/</id>
    <published>2022-06-16T15:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.438Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの鶴巻です。</p><p>今回はしばしばお問い合わせをいただく「パブリッシャー ドメイン (発行元ドメイン)」と「発行者確認」についてまとめます。<br>なお、今回の記事は、アプリケーションを普段利用する人ではなく、Azure AD と連携するアプリケーションを開発している人向けとなります。 </p><h2 id="パブリッシャー-ドメイン-発行元ドメイン-とは"><a href="#パブリッシャー-ドメイン-発行元ドメイン-とは" class="headerlink" title="パブリッシャー ドメイン (発行元ドメイン) とは"></a>パブリッシャー ドメイン (発行元ドメイン) とは</h2><p>アプリケーションと Azure AD を連携し、ユーザーが初めてアプリケーションにアクセスすると Azure AD 認証時に以下のような画面が表示される場合があります。</p><p><img src="/blog/azure-active-directory/publisher-domain/permissions-requested.png"></p><p>ここで表示されている “demo.〇〇〇.com” と表示されている部分がパブリッシャー ドメイン (発行元ドメイン) を表しています。 </p><p>この情報は、ユーザーがサインインしようとしているアプリケーションがどのような組織によって開発されたものであるかを示しています。ユーザーはこの情報を確認することで、信頼された組織が発行したアプリケーションかどうかを判断することが可能となります。弊社ではこのパブリッシャー ドメイン (発行元ドメイン) をどのように設定すればよいのかというお問い合わせをよくいただいていることから、以下でその詳細をおまとめいたします。</p><p>弊社ドキュメントの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/publisher-verification-overview">発行者の確認</a> にも詳細が記載されています。お時間あるときにご一読ください。</p><h2 id="パブリッシャー-ドメインの登録に必要なこと"><a href="#パブリッシャー-ドメインの登録に必要なこと" class="headerlink" title="パブリッシャー ドメインの登録に必要なこと"></a>パブリッシャー ドメインの登録に必要なこと</h2><p>パブリッシャー ドメインの登録には大きく分けると以下の二つのステップがあります。</p><ol><li>パブリッシャー ドメインを構成する</li><li>発行者確認を行う</li></ol><p>このうち、”発行者確認” においてよく問題となるケースが生じます。本資料では、これまでにお問い合わせいただいた実績を踏まえ、問題なく構成いただけた報告例をもとに発行者確認に必要な手順や情報を紹介します。</p><h2 id="パブリッシャー-ドメインを構成する"><a href="#パブリッシャー-ドメインを構成する" class="headerlink" title="パブリッシャー ドメインを構成する"></a>パブリッシャー ドメインを構成する</h2><p>パブリッシャー ドメインの構成は発行者確認と比べ比較的容易です。詳細は以下の資料に記載がございますが、押さえていただきたい点を後述します。 </p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/howto-configure-publisher-domain">アプリケーションの発行元ドメインを構成する</a></p><p>パブリッシャー ドメインは、以下のいずれかの方法で構成が可能です。どちらかの方法でドメインの検証ができれば問題ありませんので、アプリケーションを登録する対象テナントの環境に合わせてご選択ください。 </p><h3 id="方法-1-検証済みのドメインから選択する"><a href="#方法-1-検証済みのドメインから選択する" class="headerlink" title="方法 1. 検証済みのドメインから選択する"></a>方法 1. 検証済みのドメインから選択する</h3><p>設定対象テナントのカスタム ドメインに、検証済みドメインとしてあらかじめ登録しておくことで、以下のように選択肢に表示されるようになります。</p><p><img src="/blog/azure-active-directory/publisher-domain/update-domain-1.png"></p><p>カスタム ドメインの追加方法については <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/add-custom-domain">Azure Active Directory ポータルを使用してカスタム ドメイン名を追加する</a> をご参照ください。</p><h3 id="方法-2-JSON-ファイルを用意する"><a href="#方法-2-JSON-ファイルを用意する" class="headerlink" title="方法 2. JSON ファイルを用意する"></a>方法 2. JSON ファイルを用意する</h3><p>[新しいドメインの確認] を選択した際に表示される手順に従って構成します。 </p><p><img src="/blog/azure-active-directory/publisher-domain/update-domain-2.png"></p><p>まず、以下のような内容の JSON ファイルを事前に用意します。{YOUR-APP-ID-HERE} は、パブリッシャー ドメインを構成しているアプリケーションのアプリケーション ID に置き換えます。 </p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;associatedApplications&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;applicationId&quot;</span>: <span class="string">&quot;&#123;YOUR-APP-ID-HERE&#125;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>パブリッシャー ドメインを構成するアプリケーションが複数ある場合は、{ “applicationId”: “{YOUR-APP-ID-HERE}” } のブロックを必要な数分 “,” で区切って定義します。 </p></div><p>次に、作成した JSON ファイルを、以下のようなパスでアクセスできるよう Web サーバー上に配置します。{YOUR-DOMAIN-HERE} は、[パブリッシャー ドメイン] 欄に入力したドメインに置き換えます。 </p><blockquote><p>https://{YOUR-DOMAIN-HERE}.com/.well-known/microsoft-identity-association.json</p></blockquote><h2 id="発行者確認を行う"><a href="#発行者確認を行う" class="headerlink" title="発行者確認を行う"></a>発行者確認を行う</h2><p>発行者確認を行うには、[MPN ID を追加して発行元を確認します] をクリックして表示される画面にも表示されているとおり、事前に満たしておくべき条件がいくつかあります。以下にその条件をまとめます。</p><p><img src="/blog/azure-active-directory/publisher-domain/publisher-verified.png"></p><ol><li>大前提として <a href="https://docs.microsoft.com/ja-jp/partner-center/mpn-create-a-partner-center-account">Microsoft Partner Network プログラム</a> に登録し審査が完了している。</li><li>パートナー グローバル アドレス (PGA) の連絡先メール アドレスのドメインが、アプリケーションを登録するテナントに、検証済みカスタム ドメインとして登録されている。</li></ol><p><img src="/blog/azure-active-directory/publisher-domain/custom-domain.png"></p><div class="alert is-info"><p class="alert-title">Note</p><p>たとえば、admin＠contoso.com というメール アドレスが PGA の連絡先メール アドレスである場合、”contoso.com” ドメインが、アプリケーションを登録するテナントの検証済みカスタム ドメインに登録されている必要があります</p></div><div class="alert is-info"><p class="alert-title">Note</p><p>検証済みカスタム ドメインはサブドメインも許容されます。たとえば、admin＠contoso.com というメール アドレスが PGA の連絡先メール アドレスである場合、”sub.contoso.com” ドメインが、アプリケーションを登録するテナントの検証済みカスタム ドメインに登録されていれば問題ありません。”contoso.com” を検証済みカスタム ドメインとして構成いただく必要はありません。</p></div><ol start="3"><li>アプリケーションが登録されている対象テナントが Microsoft Partner Network テナント管理の一覧に含まれている</li></ol><p>発行者確認を行う前に、上記を満たしているかどうか事前にご確認をお願いします。実際に発行者確認を行う場合には、さらに以下の条件をすべて満たす必要があります。</p><ol><li>検証を実施するアカウントが Azure ポータルへ多要素認証を利用してサインインしている</li><li>検証を実施するアカウントに以下の権限が割り当てられている<ul><li>Azure AD で、アプリケーション管理者、クラウド アプリケーション管理者、グローバル管理者のいずれかの Azure AD ロールが割り当てられている</li><li>パートナー センターで、MPN 管理者、アカウント管理者のいずれかのロールが割り当てられている (Azure AD でグローバル管理者が割り当てられている場合は不要)</li></ul></li></ol><p>上記の内容の詳細は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/mark-app-as-publisher-verified">アプリを発行者確認済みとしてマークする</a> に記載があります。こちらもご一読ください。</p><h2 id="よくある質問"><a href="#よくある質問" class="headerlink" title="よくある質問"></a>よくある質問</h2><p>以下の点と併せて <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/troubleshoot-publisher-verification">発行者の確認に関するトラブルシューティング</a> もご覧ください。 </p><h3 id="ゲスト-ユーザーで作業を実施できますか"><a href="#ゲスト-ユーザーで作業を実施できますか" class="headerlink" title="ゲスト ユーザーで作業を実施できますか"></a>ゲスト ユーザーで作業を実施できますか</h3><p>これまでにゲスト ユーザーで実施できた実績はありません。上記のとおり「アプリケーションが登録されている対象テナントが Microsoft Partner Network テナント管理の一覧に含まれている必要があります」と説明していますが、サインインに使用しているユーザー アカウントのテナントも同様に含まれている必要があります。ゲスト ユーザーのテナントが管理外のテナントである場合やマイクロソフト アカウントである場合、一覧に追加することができないことが想定されますため、アプリケーションを登録する組織内のユーザーで実施いただくことをおすすめいたします。 </p><p>もしうまく登録／構成ができない場合には、上記の確認ポイントをすべてクリアできているかどうかご確認いただき、そのうえで弊社サポートまでお問い合わせいただければうれしいです。</p><p>では、また今度！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの鶴巻です。&lt;/p&gt;
&lt;p&gt;今回はしばしばお問い合わせをいただく「パブリッシャー ドメイン (発行元ドメイン)」と「発行者確認」についてまとめます。&lt;br&gt;なお、今回の記事は、アプリケーションを普段利用す</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Application" scheme="https://jpazureid.github.io/blog/tags/Application/"/>
    
  </entry>
  
  <entry>
    <title>2022 年 6 月末から「セキュリティの既定値群」の有効化が促されます (対象 : 一部のテナント)</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/security-default-2022/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/security-default-2022/</id>
    <published>2022-06-12T15:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.494Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>2022 年 6 月 13 日更新: 有効にすることを促すポップアップが表示される頻度、14 日後にセキュリティの既定値が有効化されることについて情報を修正しました。</p><p>2022 年 6 月 15 日更新: 影響を受ける可能性があるテナントに関しての情報を更新しました。</p><p>今後も情報が更新される可能性があります。情報の更新がありましたら本ブログの内容も更新します。</p></div><p>こんにちは。Azure &amp; Identity サポート チームの栗井です。</p><p>先日 2022 年 5 月 22 日に、グローバルの Azure Active Directory Identity Blog にて、下記記事が公開されました。</p><ul><li><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/raising-the-baseline-security-for-all-organizations-in-the-world/ba-p/3299048">Raising the Baseline Security for all Organizations in the World</a></li></ul><p>上記の記事でアナウンスされた Azure Active Directory の新しい変更点について、本ブログ記事にて日本語で情報をおまとめいたしました。<br>なお分かりやすく読んでいただけるよう、英語記事の直訳ではなく、記事の構成など大幅に変更しております。</p><h2 id="この記事の要点は"><a href="#この記事の要点は" class="headerlink" title="この記事の要点は ?"></a>この記事の要点は ?</h2><p><strong>2019 年 10 月 22 日より前に作成された一部の Azure AD テナントにおいて、「セキュリティの既定値群」の有効化を促すポップアップが表示されるようになります。実施時期の目安は 2022 年 6 月末頃を予定しています。<span style="color: red; ">ポップアップが表示されたテナントでは 14 日経過したタイミングで 「セキュリティの既定値群」 が自動的に有効になる見込みです。自動的に有効になることを避ける必要がある場合、 「セキュリティの既定値群」を一度有効にし、再度無効にしてください (対処方法を後述しています)。</span></strong></p><ul><li>影響を受ける可能性があるテナント<ul><li>2019 年 10 月以前に作成された Azure AD テナントのうち、下記すべてに該当するテナント<ul><li>「条件付きアクセス ポリシー」を利用していない</li><li>ユーザーごとの Azure AD Multi-Factor を利用していない</li><li>Azure AD Premium (単体または Microsoft 365 E3 や EMS E3 等 Azure AD Premium を含む) ライセンスを 1 ライセンスも持たない</li><li>教育機関向け (EDU) のライセンスを 1 ライセンスも持たない</li><li>現在「セキュリティの既定値群」を利用していない、かつ過去にも利用が無い </li><li>レガシ認証の利用が無い (トラフィックが検出されていない) </li><li>CSP パートナー テナントではない</li></ul></li></ul></li></ul><p>上記の条件を 1 つでも満たしていないテナントには影響ありません。</p><h2 id="前提-1-そもそも「セキュリティの既定値群-セキュリティ-デフォルト-」とはどんな機能？"><a href="#前提-1-そもそも「セキュリティの既定値群-セキュリティ-デフォルト-」とはどんな機能？" class="headerlink" title="前提 1 : そもそも「セキュリティの既定値群 (セキュリティ デフォルト)」とはどんな機能？"></a>前提 1 : そもそも「セキュリティの既定値群 (セキュリティ デフォルト)」とはどんな機能？</h2><p>セキュリティの既定値群とは、2019 年 10 月にリリースされた、無料で利用できる Azure AD のセキュリティ機能です。</p><p>この機能を有効にすることで、下記のセキュリティ機能が一括で有効になります。</p><ol><li>すべてのユーザーに対して、Azure AD Multi-Factor Authentication への登録を必須にします。</li><li>管理者に多要素認証の実行を要求します。</li><li>必要に応じてユーザーに多要素認証を要求します。</li><li>レガシ認証プロトコルをブロックします。</li><li>Azure portal などへのアクセスに多要素認証を要求します。</li></ol><ul><li>参考 : <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/concept-fundamentals-security-defaults">Azure AD のセキュリティの既定値群</a></li></ul><p>機能の詳細については参考の公開情報をご覧ください。</p><h2 id="前提-2-自分のテナントでは、セキュリティの既定値群が有効化されている"><a href="#前提-2-自分のテナントでは、セキュリティの既定値群が有効化されている" class="headerlink" title="前提 2 : 自分のテナントでは、セキュリティの既定値群が有効化されている ?"></a>前提 2 : 自分のテナントでは、セキュリティの既定値群が有効化されている ?</h2><p>セキュリティの既定値群の現在の設定値は、Azure ポータルの下記画面にて確認できます。</p><ol><li>管理者ユーザーで Azure ポータル (<a href="https://portal.azure.com/">https://portal.azure.com</a>) にアクセスします。</li><li>Azure Active Directory &gt; プロパティ に進みます。<ul><li>直通リンク : <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Properties">https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Properties</a></li></ul></li><li>[セキュリティの既定値群の有効化] を押下いただくと、下記画面が表示されます。[はい / いいえ] によって現在の設定値が確認できます。<img src="/blog/azure-active-directory/security-default-2022/settings.png"></li></ol><p>なお 2019 年 10 月 22 日以降に作成された Azure AD テナントでは、テナントを作成した時点で、セキュリティの既定値群が有効にされています。</p><h2 id="本題-2019-年-10-月以前に作成された一部のテナントでは、管理者に対して「セキュリティの既定値群」の有効化を促すポップアップが表示されるようになる予定です。"><a href="#本題-2019-年-10-月以前に作成された一部のテナントでは、管理者に対して「セキュリティの既定値群」の有効化を促すポップアップが表示されるようになる予定です。" class="headerlink" title="本題 : 2019 年 10 月以前に作成された一部のテナントでは、管理者に対して「セキュリティの既定値群」の有効化を促すポップアップが表示されるようになる予定です。"></a>本題 : 2019 年 10 月以前に作成された一部のテナントでは、管理者に対して「セキュリティの既定値群」の有効化を促すポップアップが表示されるようになる予定です。</h2><p>既に多くのお客様環境において「セキュリティの既定値群」や「条件付きアクセス ポリシー」を利用した MFA をご活用いただいております。<br>しかしいずれも有効になっていないテナントの場合、セキュリティ観点では安全な状態とは言えません。このようなテナントを対象に、<strong>2022 年の 6 月末を目安に、セキュリティの既定値群の有効化を促し、その後設定を有効にする予定</strong>です。</p><h3 id="セキュリティの既定値群の有効化ポップアップが表示されるまでのステップ"><a href="#セキュリティの既定値群の有効化ポップアップが表示されるまでのステップ" class="headerlink" title="セキュリティの既定値群の有効化ポップアップが表示されるまでのステップ"></a>セキュリティの既定値群の有効化ポップアップが表示されるまでのステップ</h3><ol><li><p>セキュリティの既定値群のポップアップ表示の対象テナントには、まずグローバル管理者宛に、メールによる通知が送信される予定です。</p></li><li><p>そして 6 月下旬頃から、グローバル管理者によるサインイン時に、下記のようなプロンプトが表示されるようになります。<br><img src="/blog/azure-active-directory/security-default-2022/prompt.png"></p></li><li><p>上記プロンプトで “Enable Security Defaults” を選択いただくと、即時にセキュリティの既定値群が有効にされます。</p></li><li><p>上記プロンプトで “Ask Later” を選択いただくと、2 日間上記通知は表示されなくなりますが、2 日後に再度表示されます (再度 Ask later が可能)。合計 14 日間 Ask later で先延ばしが可能です。</p></li></ol><h3 id="ポップアップが表示された場合どうなるか"><a href="#ポップアップが表示された場合どうなるか" class="headerlink" title="ポップアップが表示された場合どうなるか"></a>ポップアップが表示された場合どうなるか</h3><ul><li>後述する 「再無効化」 の対処をしない場合、14 日経過したタイミングで 「セキュリティの既定値群」 が自動的に有効になる予定です。(一部のテナントに対しては、自動的に有効にするのではなく、ポップアップでの選択肢としても引き続き無効としたままとするものを用意する予定ですが、無効のままとしたい場合には、再無効化の作業を事前に実施しておくことが確実です。)</li><li> 「セキュリティの既定値群」 を無効にしておく必要がある場合、 「セキュリティの既定値群」を一度有効にし、有効にした後で再度無効にすることで、「セキュリティの既定値群」の有効化を促すポップアップは表示されなくなり、また、セキュリティの既定群の自動的な有効化も避けることができます。(この手法を本ブログでは <strong>「再無効化」</strong> と呼称しています)</li><li>再無効化において、一度有効にしてから無効に再度変更するまでに特に間隔を空ける必要はありません。</li><li>再無効化はポップアップが表示される前に実施しても効果が見込めます。しかし、タイミング次第では再無効化を事前に実施していてもポップアップが表示される可能性があります。この場合は、ポップアップが表示されたのちに再度、再無効化を実施ください。</li></ul><h3 id="再無効化の実施方法"><a href="#再無効化の実施方法" class="headerlink" title="再無効化の実施方法"></a>再無効化の実施方法</h3><ol><li>Azure portal に、セキュリティ管理者、条件付きアクセス管理者、または全体管理者としてサインインします。</li><li>[Azure Active Directory]&gt;[プロパティ] の順に移動します。</li><li>[セキュリティの既定値群の管理] を選択します。</li><li>[セキュリティの既定値群の有効化] トグルを [はい] に設定します。</li><li>[保存] を選択します。</li><li>[セキュリティの既定値群の有効化] トグルを [いいえ] に設定します。</li><li>[保存] を選択します。</li></ol><h2 id="補足-1-セキュリティの既定値群を有効化すると、具体的にどうなるの？"><a href="#補足-1-セキュリティの既定値群を有効化すると、具体的にどうなるの？" class="headerlink" title="補足 1 : セキュリティの既定値群を有効化すると、具体的にどうなるの？"></a>補足 1 : セキュリティの既定値群を有効化すると、具体的にどうなるの？</h2><p>セキュリティの既定値群の機能については、前述の項目「前提 1 : そもそも「セキュリティの既定値群 (セキュリティ デフォルト)」とはどんな機能？」の通りですが、ユーザー / 管理者目線で発生する具体的な差異について、補足します。</p><h3 id="1-すべてのユーザー-Azure-MFA-への登録が必須になります。"><a href="#1-すべてのユーザー-Azure-MFA-への登録が必須になります。" class="headerlink" title="1. すべてのユーザー : Azure MFA への登録が必須になります。"></a>1. すべてのユーザー : Azure MFA への登録が必須になります。</h3><p>MFA の方法を一切登録していないユーザーに対して、登録が要求されます。具体的には、サインイン時に下記画面が表示され、Microsoft Authenticator のアプリによる MFA の登録が要求されます。<br><img src="/blog/azure-active-directory/security-default-2022/mysignins.png"></p><ul><li>Azure AD Premium (またはそれを含む) ライセンスが割り当てられたテナントでは、SMS や音声通話による MFA も選択できます。Azure AD Premium ライセンスが割り当てられていないテナントで一般ユーザーが利用できる多要素認証は Microsoft Authenticator のみです。</li><li>管理者ユーザーは MFA の方法として 2 つの登録が必要です。Microsoft Authenticator に加えて、SMS の番号の登録も要求されます。</li></ul><h3 id="2-すべてのユーザー-レガシ認証がブロックされます。"><a href="#2-すべてのユーザー-レガシ認証がブロックされます。" class="headerlink" title="2. すべてのユーザー : レガシ認証がブロックされます。"></a>2. すべてのユーザー : レガシ認証がブロックされます。</h3><p>一般的にレガシ認証と呼ばれる、古いプロトコルによる認証がすべてブロックされます。<br>レガシ認証には Exchange ActiveSync、POP、IMAP、SMTP、MAPI over HTTP などが含まれます。</p><p>レガシ認証のみ対応しているメールクライアント アプリ等を利用している場合、レガシ認証のブロックにより接続ができないなどの影響が生じる恐れがあります。</p><h3 id="3-管理者ユーザー-全てのサインイン時に-MFA-が要求されます。"><a href="#3-管理者ユーザー-全てのサインイン時に-MFA-が要求されます。" class="headerlink" title="3. 管理者ユーザー : 全てのサインイン時に MFA が要求されます。"></a>3. 管理者ユーザー : 全てのサインイン時に MFA が要求されます。</h3><p>すべてのユーザーに対して MFA の登録が必要となるほか、管理者ユーザーについては、サインインの度に毎回、登録した方法による MFA が要求される動作になります。</p><p>管理者ではない一般ユーザーについては、サインインの度に毎回 MFA が要求される動作にはなりません。Azure AD がユーザーの不審な操作を検知した際や、ユーザーが Azure ポータルや Azure CLI などの特権を必要とするアプリケーションにアクセスする際など、”必要に応じて” MFA が要求されるようになります。</p><h2 id="補足-2-上記変更に至った経緯"><a href="#補足-2-上記変更に至った経緯" class="headerlink" title="補足 2 : 上記変更に至った経緯"></a>補足 2 : 上記変更に至った経緯</h2><p>そもそもなぜ、セキュリティの既定値群の有効を進めるような施策が実施されるのに至ったのか？その経緯と背景については、冒頭に記載の「Raising the Baseline Security for all Organizations in the World」にてご紹介しております。以下はその抄訳です。</p><p>世界中のお客様にご利用いただいている Azure AD においては、日々何全件もの不審なサインインやアカウント攻撃が発生しています。しかし残念ながら現状は、その防御率は 100% ではありません。</p><p>もし不審なアクセスを防ぐことができずアカウントが侵害されると、お客様の業務影響や情報漏洩などに直結しうる大問題であることは、言うまでもありません。</p><p>少しでもこのような事態を回避するために、Azure AD の各種設定を活用して、セキュリティ性を高めることは重要です。中でも最も大事なのは、<strong>MFA を有効化すること、そしてレガシ認証を無効化してモダン認証 (先進認証) に完全移行すること</strong>です。</p><p>事実、弊社で報告を受けたアカウントの侵害事例のうち 99.9% 以上に対して、MFA が有効化されていませんでした。</p><p>MFA が有効化されていない場合、パスワードのみでサインインができてしまうということです。パスワードのみによるアカウントの保護は昨今においては非常に脆弱で、パスワード スプレー攻撃やパスワード リスト型攻撃、フィッシングといった脅威における格好のターゲットになります。レガシ認証も同様の理由 (= パスワードのみの認証) で、攻撃者にとってはとても都合のいいセキュリティ ホールです。</p><p>ただし残念ながら、全ての組織において IT セキュリティ専門のチームが存在している状況ではありません。そのため MFA という存在自体を知らなかったり、知っていても導入するきっかけが無い場合もあるかと存じます。</p><p>そのような状況を改善するために、2019 年 10 月以降に作成された Azure AD テナントに対しては、既定で「セキュリティの既定値群」の設定が有効にされています。この機能は 3000 万以上の組織にてご活用いただいています。これらの組織では、全体の Azure AD 利用者に比べ、80% ものアカウント侵害を防いでいる実績があります。</p><p>しかし 2019 年 10 月より前に作成された Azure AD テナントでは、「セキュリティの既定値群」は管理者が明示的に設定を変更しない限りは、有効にされておりません。そのため、別途条件付きアクセス ポリシー等の他の機能によってセキュリティ性を高めていただいている場合を除き、前述した「パスワードのみの認証」によるリスクに晒されている現状を懸念して、セキュリティの既定値群の有効に向けた施策を決定しました。</p><p>「セキュリティの既定値群」は組織のセキュリティ性を担保いただくにあたって優秀な機能ですが、無料のオプションであるため、カスタマイズ性が低いことがデメリットです。<br>Azure AD Premium のライセンスによってご利用いただける「条件付きアクセス」の機能であれば、アクセス パターンやユーザーに応じた制御をよりきめ細かく構成できますので、必要に応じて導入をご検討いただけますと幸いです。</p><p>ご不明な点がございましたら弊社サポートまでお気軽にお問い合わせください。上記内容が少しでも皆様の参考となりますと幸いです。</p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><hr><p>Q1. ポップアップは英語以外でも表示されますか？</p><p>A1. はい、日本語など各国の言語に翻訳され表示される見込みです。</p><hr><p>Q2. 事前通知はグローバル管理者へのメール以外にもなされますか。</p><p>A2. はい、メールだけでなく、M365 Message Center と Azure ポータル上での表示が行われる見込みです。</p><hr><p>Q3. CSP のパートナーのテナントでも表示されますか？</p><p>A3. いいえ、表示されません。 またこれらのテナントでは自動的にセキュリティの既定値群が有効になることもありません。</p><hr><h2 id="関連リンクまとめ"><a href="#関連リンクまとめ" class="headerlink" title="関連リンクまとめ"></a>関連リンクまとめ</h2><h3 id="記事内で引用・ご紹介した公開情報-再掲"><a href="#記事内で引用・ご紹介した公開情報-再掲" class="headerlink" title="記事内で引用・ご紹介した公開情報 (再掲)"></a>記事内で引用・ご紹介した公開情報 (再掲)</h3><ul><li><a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/raising-the-baseline-security-for-all-organizations-in-the-world/ba-p/3299048">Raising the Baseline Security for all Organizations in the World (英語記事) | Microsoft Tech Community</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/concept-fundamentals-security-defaults">Azure AD のセキュリティの既定値群 | Microsoft Docs</a></li></ul><h3 id="Azure-AD-MFA-についてもっと知りたい方へ"><a href="#Azure-AD-MFA-についてもっと知りたい方へ" class="headerlink" title="Azure AD MFA についてもっと知りたい方へ"></a>Azure AD MFA についてもっと知りたい方へ</h3><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-mfa-howitworks">Azure AD Multi-Factor Authentication | Microsoft Docs</a>Azure AD MFA の動作の仕組みについてご紹介しています。</li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/MFA_configuration_scenarios/">Azure MFA 導入パターンを網羅的にご紹介！ | Japan Azure Identity Support Blog</a>Azure AD MFA を有効化いただける各種機能を、セキュリティの規定値群や条件付きアクセスを含め、ご紹介しております。</li></ul><h3 id="条件付きアクセスについてもっと知りたい方へ"><a href="#条件付きアクセスについてもっと知りたい方へ" class="headerlink" title="条件付きアクセスについてもっと知りたい方へ"></a>条件付きアクセスについてもっと知りたい方へ</h3><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">条件付きアクセスとは | Microsoft Docs</a>条件付きアクセスの概要をご紹介しております。</li><li><a href="https://www.youtube.com/watch?v=CTdQnnm9s_k">3-2: 詳説！Azure AD 条件付きアクセス - 動作の仕組みを理解する編 | youtube.com</a>Azure AD 開発チームがお届けするウェビナーです。条件付きアクセスの動作の仕組みをご紹介しております。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;2022 年 6 月 13 日更新: 有効にすることを促すポップアップが表示される頻度、14 日後にセキュリティの既定値が有効化されることについて情報を修正し</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
    <category term="Security Default" scheme="https://jpazureid.github.io/blog/tags/Security-Default/"/>
    
  </entry>
  
  <entry>
    <title>新たな Azure AD パートナーとの統合でセキュリティ体制を強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/</id>
    <published>2022-06-08T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.498Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 9 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/strengthen-your-security-posture-with-new-azure-ad-partner/ba-p/2810642">Strengthen your security posture with new Azure AD partner integrations</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日は、新たな <a href="https://azure.microsoft.com/ja-jp/services/active-directory/">Azure Active Directory</a> (Azure AD) 製品の統合ソリューションをご紹介します。これらのソリューションは、Azure AD の機能を活用することで、ID へのアクセス、ガバナンス、および認証を合理化し、企業全体にわたる <a href="https://www.microsoft.com/ja-jp/sec%EF%BC%88%EF%BC%88urity/business/zero-trust">ゼロ トラスト</a> セキュリティを強化するのに役立ちます。以下では、パートナー各社が弊社チームと連携して取り組んできた最新の統合ソリューションをご紹介します。</p><h2 id="Traced-は-Azure-AD-と統合しモバイル脅威の防御を強化"><a href="#Traced-は-Azure-AD-と統合しモバイル脅威の防御を強化" class="headerlink" title="Traced は Azure AD と統合しモバイル脅威の防御を強化"></a>Traced は Azure AD と統合しモバイル脅威の防御を強化</h2><p>2022 年には、自宅、ジム、空港、ホテル、ライド シェアなど、事実上どのような場所でも仕事ができるようになりました。社内ネットワークとは異なり境界のない環境も保護するために、Azure AD は、プライバシーに特化したモバイル脅威対策 (MTD) のプロバイダーである <a href="https://traced.app/integration-with-azure-ad/">Traced</a> とシームレスに統合されるようになりました。Azure AD の条件付きアクセスを使ってゼロ トラスト セキュリティを実施することにより、Traced のお客様は、危険なデバイスや信頼されていないモバイル デバイスから、Microsoft 365 アプリや何千もの Azure AD ギャラリー アプリへのアクセスを自動的に制限することができるようになりました。</p><p><img src="/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/01_jtrupp_0-1651594641519.png" alt="図 1: Traced - Azure AD と Microsoft 365 アプリとの統合された保護機能"></p><p><a href="https://traced.app/trustd-mtd/">Trustd MTD の統合</a> は、デバイスの状態を確認し、会社のリソースへのアクセスをユーザー レベルで制限します。つまり、デバイスが社内のセキュリティ運用部門 (Security Operation Center) によって認識または管理されていない場合でも、デバイスは保護された状態となります。このように Traced 社は、信頼できるモバイル デバイスにのみマイクロソフトのクラウド アプリケーションへのアクセスを提供し、ポリシーを強制する場所として機能します。また、Traced のディープ ラーニング エンジンにより、悪意のあるアプリを発見したり、分析と対応に重要な情報が得られたりなどします。この新しい Traced との統合により、お客様はコンプライアンスを達成し、ユーザーのモバイル デバイスから発生する脅威を軽減することができます。</p><h2 id="Saviynt-は-Azure-AD-と双方向でユーザー-リスクを共有"><a href="#Saviynt-は-Azure-AD-と双方向でユーザー-リスクを共有" class="headerlink" title="Saviynt は Azure AD と双方向でユーザー リスクを共有"></a>Saviynt は Azure AD と双方向でユーザー リスクを共有</h2><p>ID ガバナンスのプロバイダーである <a href="https://saviynt.com/">Saviynt </a> は、<a href="https://saviynt.com/enterprise-identity-cloud/">Enterprise Identity Cloud (EIC)</a> と Azure AD の統合を拡大し、Azure AD P2 ライセンス利用者向けに双方向のユーザー リスク共有を提供するようになりました。マイクロソフトの顧客およびパートナーは、EIC にて Microsoft Graph API を使用して、サインイン リスクやユーザー リンク検出など、Azure AD Identity Protection から取得したユーザー リスクを検証するガバナンス ワークフローを構築できるようになりました。 </p><p>Saviynt 社の EIC と Azure AD Identity Protection の統合により、ID 主導の信頼の数値化が自動化に行えるようになり、お客様では以下のことが可能になります。 </p><ul><li>プラットフォームとアプリケーションにまたがるリスクの高い ID の確認</li><li>Azure AD Identity Protection と Saviynt 社の EIC プラットフォームから、ID と資産のリスク シグナルを集約</li><li>管理者と資産の所有者が迷うことなくアクセス要求を承認または拒否可能に</li><li>リスクの高い ID を継続的に監視し、アクセス漏れを防止してリスクにさらされる可能性を低減</li><li>ID の継続的なアクセス レビューにより、不正アクセスを排除し、リスク ベースのセキュリティ ポリシーを適用</li></ul><p>また、Saviynt 社は、EIC およびクラウド特権アクセス管理 (PAM) ソリューションを通じて Saviynt 社が判断したリスクに基づいて、Azure AD でユーザーを高リスクとしてフラグ付けすることができます。こうすることで、お客様は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/howto-conditional-access-policy-risk-user">ユーザー リスク ベース</a> および <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/howto-conditional-access-policy-risk">サインイン リスク ベース</a> の条件付きアクセスで保護しながら、リスクの高いユーザー アクセスをブロックしたり、追加アクションを実行することができます。</p><h2 id="Fastpath-はユーザー-アクセス解析と-Azure-AD-Identity-Governance-を統合"><a href="#Fastpath-はユーザー-アクセス解析と-Azure-AD-Identity-Governance-を統合" class="headerlink" title="Fastpath はユーザー アクセス解析と Azure AD Identity Governance を統合"></a>Fastpath はユーザー アクセス解析と Azure AD Identity Governance を統合</h2><p>脅威が常に外部からやってくるわけではないことは、システム管理者やセキュリティ専門家の間ではよく知られています。多くの場合、金融詐欺は、財務、ERP (Enterprise Resource Planning)、およびその他のビジネス アプリケーション内で不適切なアクセスを持つ組織内の個人によって実行されます。監査法人や規制機関からも、過剰なアクセスによるリスクはますます厳しく問われるようになっています。</p><p>マイクロソフトは、ビジネス アプリにおいて既存のアクセス権を持つユーザーによるリスクなど、こうした内部の脅威から組織を保護するために、<a href="https://www.gofastpath.com/">Fastpath</a> と提携しました。Fastpath は、Microsoft Dynamics 365、Salesforce、SAP、Zuora、Intacct、Acumatica、Peoplesoft など、多くのビジネス アプリケーションにおけるユーザー アクセスと職務分離 (<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/ensure-compliance-using-separation-of-duties-checks-in-access/ba-p/2466939">SOD</a>) リスクの追跡、レビュー、承認、軽減を支援するクラウド型のリスクおよびコンプライアンス管理プラットフォームです。</p><p>Fastpath は、これらの業務アプリと連携する同社の Access Risk Monitor を、Microsoft Graph API を通じて <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/identity-governance-overview">Azure AD Identity Governance</a> とも連携させています。これにより、Azure AD の顧客は、<a href="https://www.gofastpath.com/blog/fastpath-integrates-with-azure-ad-identity-governance-for-improved-security">Azure AD と Fastpath を使用して</a>、ユーザーがプロビジョニングされる前にアクセス上のリスクを特定し解決することができるようになります。Fastpath は、Azure AD <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-overview">エンタイトルメント管理</a> のアクセス パッケージに関連するアプリケーションを分析し、それらのアプリケーション内の職務分離やその他のアクセス違反の可能性を特定します。 </p><p><img src="/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/02_jtrupp_2-1651594641533.jpeg" alt="図 2: Fastpath Assure のリスク分析を活用した Microsoft Azure AD Identity Governance に関するソリューションのアーキテクチャ"></p><p>さらに、Azure AD エンタイトルメント管理を使用すると、ユーザーが不適切なアクセスを持っているかどうか、または職務分離の競合を解決するために是正措置を講じる必要があるかどうかを確認することができます。このような精査により、管理者は、ユーザーが職務を遂行するために必要な最小限のアクセスのみを許可するよう保証することができます。Azure AD と Fastpath 社の統合は、自動プロビジョニング ワークフローやアクセス レビュー、アクセス認証においてきめ細かなアクセス レポートを確認するため、幅広いエンタープライズのセキュリティを実現するうえで重要な役割を果たすことになります。</p><h2 id="Squadra-Technologies、Thales、HID-Global、Yubico-との統合により認証を強化"><a href="#Squadra-Technologies、Thales、HID-Global、Yubico-との統合により認証を強化" class="headerlink" title="Squadra Technologies、Thales、HID Global、Yubico との統合により認証を強化"></a>Squadra Technologies、Thales、HID Global、Yubico との統合により認証を強化</h2><p><a href="https://www.squadratechnologies.com/">Squadra Technologies</a> の新しい <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/SquadraTechnologies.SquadrasecRMMOMSsolution?tab=Overview">Security Removable Media Manager (secRMM)</a> は、USB メモリなどのリムーバブル ストレージ デバイスの安全な認証を可能にします。誰かが USB メモリなどのリムーバブル ストレージ デバイスを差し込むと、Squandra の secRMM が、その人のデジタル ウォレットとして機能する <a href="https://www.microsoft.com/ja-jp/security/mobile-authenticator-app">Microsoft Authenticator</a> を使用して QR コードをスキャンするよう促します。その後、Squadra の secRMM は、デバイスのプロパティ、ユーザー、ファイル、プログラムに基づいて、外部ストレージ メディアへの書き込みの承認、または書き込み権限を有効にします。 </p><p><img src="/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/03_jtrupp_3-1651594641536.png" alt="図 3: secRMM の認証画面"></p><p>最近リリースされた <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-certificate-based-authentication">Azure AD の証明書ベース認証 (CBA)</a> により、組織は認証に <a href="https://cpl.thalesgroup.com/access-management/idprime-md-pki-smart-cards">Thales IDPrime スマート カード</a> と USB トークン、<a href="https://cpl.thalesgroup.com/access-management/security-applications/authentication-client-token-management">SafeNet Authentication Client（SAC）</a> を使用できるようになりました。また、スマート カード/トークンや証明書のライフサイクル管理には、Thales 社の資格情報管理システムである <a href="https://cpl.thalesgroup.com/access-management/vsec-cms-secure-device-management">vSEC</a> を使用することもできます。</p><p>HID Global 社は、<a href="https://www.hidglobal.com/products/cards-and-credentials/crescendo">Crescendo® スマート カード</a> とセキュリティ キーを使用して、Azure AD の証明書ベースの認証 (CBA) をお客様に提供しています。Azure AD CBA の統合により、HID 社の <a href="https://www.hidglobal.com/solutions/identity-access-management/physical-identity-access-management/workforceid-digital-credential-manager">WorkforceID™ Digital Credential Manager</a> による資格情報の一元管理が可能となり、ユーザー体験と保護強化のバランスを取りながらセキュリティに対して包括的なアプローチが取れるようになります。</p><p>Yubico 社は、連邦政府が従業員、サプライヤー、パートナーに対してフィッシング耐性のある認証を導入することを求める大統領令 14028 と <a href="https://www.whitehouse.gov/briefing-room/presidential-actions/2022/01/19/memorandum-on-improving-the-cybersecurity-of-national-security-department-of-defense-and-intelligence-community-systems/">国家安全保障指令 8</a> をサポートするために Azure AD を採用し、同社の <a href="https://www.youtube.com/watch?v=QNwihkspJS0">YubiKey</a> でクラウド ネイティブ認証を提供を開始しました。YubiKey を用いれば、BYOD (Bring-Your-Own-Device)、在宅勤務、フロント ワーカーなど、どこからでも指一本で安全にログインすることができます。 </p><h2 id="Ultimate-Kronos-Group-UKG-から-Azure-AD-へ従業員データを自動的にプロビジョニング"><a href="#Ultimate-Kronos-Group-UKG-から-Azure-AD-へ従業員データを自動的にプロビジョニング" class="headerlink" title="Ultimate Kronos Group (UKG) から Azure AD へ従業員データを自動的にプロビジョニング"></a>Ultimate Kronos Group (UKG) から Azure AD へ従業員データを自動的にプロビジョニング</h2><p><img src="/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/04_jtrupp_4-1651594641538.png"></p><p><a href="https://marketplace.ukg.com/en-US/apps/368607/ukg-pro-for-microsoft-azure-active-directory/resources">UKG Pro</a> のお客様は、Azure AD による従業員データのプロビジョニングと管理を自動化できるようになりました。Microsoft Graph を利用した新しいユーザー プロビジョニング機能により、業務ワークフローと人事ワークフローとの間で、よりスムーズな従業員体験を構築できるようになりました。UKG Pro のユーザーは、以下のことが可能になります。</p><ul><li>Azure AD で UKG Pro にアクセスできる人を制御</li><li>ユーザーが Azure AD アカウントで UKG Pro に自動的にサインイン</li><li>Azure ポータルで一元的にアカウントを管理</li></ul><p>UKG Pro と Azure AD 統合の詳細については <a href="https://www.youtube.com/watch?v=cu_HvXts-BQ&feature=youtu.be">こちら</a> をご覧ください。</p><h2 id="新しい-Azure-AD-アプリケーション-ギャラリーの統合"><a href="#新しい-Azure-AD-アプリケーション-ギャラリーの統合" class="headerlink" title="新しい Azure AD アプリケーション ギャラリーの統合"></a>新しい Azure AD アプリケーション ギャラリーの統合</h2><p><a href="https://www.youtube.com/watch?v=MHXm6Jwozm0">Azure AD アプリ ギャラリー</a> は、<a href="https://www.youtube.com/watch?v=7SU5S0WtNNk">シングル サインオン (SSO)</a> と <a href="https://www.youtube.com/watch?v=k2_fk7BY8Ow">自動化されたユーザー プロビジョニング</a> を簡単に導入・設定することができる何千ものアプリのカタログです。このほど、アプリ ギャラリーに以下が追加されました。</p><p><img src="/blog/azure-active-directory/strengthen-your-security-posture-with-new-azure-ad-partner/05_jtrupp_5-1651594641541.png"></p><h2 id="今後の展開"><a href="#今後の展開" class="headerlink" title="今後の展開"></a>今後の展開</h2><p>Azure AD は、リソースへのアクセスを保護し、すべての ID を一元的に管理することで、ユーザーの生産性を維持するとともに、スムーズなユーザー体験を提供します。私たちは、常にお客様の声に耳を傾け、パートナーと協力して、お客様のニーズを満たす新しい統合を作成しています。今後数ヶ月の間に、弊社の ID ソリューションの可能性をさらに広げるような情報を紹介予定です。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 9 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra のご紹介 - 先進的な ID とアクセスのソリューション</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-microsoft-entra-modern-identity-and-access-solutions/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-microsoft-entra-modern-identity-and-access-solutions/</id>
    <published>2022-06-08T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.306Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 31 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/introducing-microsoft-entra-modern-identity-and-access-solutions/ba-p/2520440">Introducing Microsoft Entra - modern identity and access solutions</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日私たちは、あらゆるものがつながる世界でセキュアなアクセスを実現する新しい製品群、Microsoft Entra を発表しました。Vasu Jakkal と Joy Chik による <a href="https://news.microsoft.com/ja-jp/2022/06/01/220601-secure-access-for-a-connected-worldmeet-microsoft-entra/">Microsoft Security のアナウンス ブログ (日本語)</a> を是非ご確認ください。</p><h2 id="Microsoft-Entra-製品ファミリー"><a href="#Microsoft-Entra-製品ファミリー" class="headerlink" title="Microsoft Entra 製品ファミリー"></a>Microsoft Entra 製品ファミリー</h2><h3 id="Azure-Active-Directory-Azure-AD"><a href="#Azure-Active-Directory-Azure-AD" class="headerlink" title="Azure Active Directory (Azure AD)"></a><a href="https://www.microsoft.com/en-us/security/business/solutions/secure-app-access?rtc=1">Azure Active Directory (Azure AD)</a></h3><p>セキュリティが統合されたマルチ クラウドの ID およびアクセス管理のソリューションです。</p><h3 id="Microsoft-Entra-Permissions-Management"><a href="#Microsoft-Entra-Permissions-Management" class="headerlink" title="Microsoft Entra Permissions Management"></a><a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-permissions-management?rtc=1">Microsoft Entra Permissions Management</a></h3><p>クラウド上のあらゆる ID のアクセス許可を管理する統合機能です。</p><h3 id="Microsoft-Entra-Verified-ID"><a href="#Microsoft-Entra-Verified-ID" class="headerlink" title="Microsoft Entra Verified ID"></a><a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-verified-id?rtc=1">Microsoft Entra Verified ID</a></h3><p>業界をリードするグローバル プラットフォームであり、プライバシーを尊重しながら、より安全な共同作業を可能にする機能です。</p><h2 id="パブリック-プレビューの予定"><a href="#パブリック-プレビューの予定" class="headerlink" title="パブリック プレビューの予定"></a>パブリック プレビューの予定</h2><h3 id="ワークロード-ID"><a href="#ワークロード-ID" class="headerlink" title="ワークロード ID"></a><a href="https://www.microsoft.com/en-us/security/business/solutions/workload-identity-management?rtc=1">ワークロード ID</a></h3><p>あらゆるアプリケーションやサービスに対して ID を割り当て、保護し、アクセス制御やリスク検知のカバー範囲を広げる機能です。</p><h3 id="ライフサイクル-ワークフロー"><a href="#ライフサイクル-ワークフロー" class="headerlink" title="ライフサイクル ワークフロー"></a><a href="https://www.microsoft.com/en-us/security/business/solutions/identity-governance?rtc=1">ライフサイクル ワークフロー</a></h3><p>ユーザー属性の変更に伴うアクセス権の割り当てと管理、およびアクセスの監視と追跡を自動化する機能です。 </p><p>すべての詳細とリンクは、本日の <a href="https://news.microsoft.com/ja-jp/2022/06/01/220601-secure-access-for-a-connected-worldmeet-microsoft-entra/">Microsoft Security ブログ - あらゆるものがつながる世界でセキュアなアクセスを実現する</a> でご覧いただけます。  </p><p>いつものように、皆様からのフィードバックおよびご意見をお待ちしております。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 31 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>非アクティブなユーザーのレビューおよび削除がパブリック プレビューとなりました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/review-and-remove-aad-inactive-users-in-public-preview/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/review-and-remove-aad-inactive-users-in-public-preview/</id>
    <published>2022-05-29T00:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.470Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 24 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/review-and-remove-aad-inactive-users-in-public-preview/ba-p/3290632">Review and remove AAD inactive users in Public Preview</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日は、Azure Active Directory Identity Governance の一部である、非アクティブなユーザーに対するアクセス レビューがパブリック プレビューとなりましたことを紹介させていただきます。この 2 年間で、組織内ならびに組織間でのコラボレーションが急増しました。このようなコラボレーションは、生産性の向上につながる一方で、「古い」アカウント (一時期は必要であったが、現在は不要なアカウント) が継続してご利用環境に存在している可能性を高める状況にもなっています。例えば、退職した元従業員や、業務が終了した契約社員などです。このような古いアカウントを発見し、今後利用する必要がない場合は削除することで、簡単かつ強力にセキュリティ リスクを低減することができます。</p><p>非アクティブなユーザーに対するアクセス レビューのパブリック プレビューにより、管理者は一定日数サインインしていない古くなったアカウントをレビューし、削除することができます。対話型サインインと非対話型サインインの両方が、サインイン アクティビティに含まれます。レビュー プロセスの一環として、古くなったアカウントは自動的に削除されます。これにより、組織のセキュリティ体制が改善されます。</p><p>非アクティブなユーザーのリスクを軽減したいとお考えであれば、今すぐアクセス レビューをお試しください。ゲスト ユーザーまたはすべてのユーザーに対して、最長 2 年間の非アクティブ期間を指定することができます。</p><p><img src="/blog/azure-active-directory/review-and-remove-aad-inactive-users-in-public-preview/image01.jpg"></p><p>非アクティブなユーザーのレビューのセットアップ方法については、詳しくは <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/create-access-review">Azure AD アクセス レビューのドキュメント</a> を参照ください。MS Graph API (ベータ版) を使ってこれらのレビューを試すには <a href="https://docs.microsoft.com/ja-jp/graph/api/accessreviewset-post-definitions?view=graph-rest-beta&tabs=http%22%20%5Cl%20%22example-4-create-an-access-review-on-a-group-with-multiple-stages">MS Graph API のドキュメント</a> をご覧ください。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/alex_a_simons">@Alex_A_Simons</a>)<br>Corporate Vice President of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 24 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>新機能 - Intune の登録またはリスクに対して再認証を要求</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-require-reauthentication-for-intune-enrollment-or-risk/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-require-reauthentication-for-intune-enrollment-or-risk/</id>
    <published>2022-05-23T01:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.386Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 10 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/new-require-reauthentication-for-intune-enrollment-or-risk/ba-p/3299049">New: Require reauthentication for Intune enrollment or risk</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>ID とデバイスを明示的に検証することは、Zero Trust を採用する組織において最優先事項です。一部の重要な業務では、デバイスが誰かに借りられていたりトークンを盗まれたりしていないことを確認するために、ユーザーに再認証のプロンプトを出すことが重要です。これに対応するため、今回、Azure AD 条件付きアクセスにおける再認証のパブリック プレビューを発表できることを嬉しく思います。 </p><p>以下では、このチームのプロダクト マネージャーである Ricky Pullan より詳細を説明いたします。</p><p>Alex Weinert</p><hr><p>皆さん、こんにちは。</p><p>条件付きアクセスの再認証ポリシーを開発したチームでプロダクト マネージャーを務める Ricky Pullan です。弊社では、デスクから離れたり、子供にデバイスを貸したり、あるいはデバイスがトークンを盗むマルウェアに感染した場合などのシナリオにおいて、より高度な保護を求めるフィードバックを多くのお客様からいただいておりました。また、この機能の開発にあたりお客様からたくさんのフィードバックを頂戴しておりますが、今回のパブリック プレビューの開始にあたり、さらに多くのお客様からのフィードバックをいただけることをうれしく思います。</p><p>この新機能により、リスクの高いシナリオに対して、ID、デバイス、その他の条件付きアクセスに設定した条件を明示的に再確認することができます。再認証には、対話的なユーザー認証が必要で、以下のようなシナリオに関連するすべてのポリシー チェックを実行します。</p><ul><li>ユーザーリスク </li><li>セッションのリスク </li><li>Microsoft Intune デバイスの登録 </li></ul><p>今後、上記以外にも対応するシナリオを順次拡大していく予定です。</p><h2 id="始めてみましょう"><a href="#始めてみましょう" class="headerlink" title="始めてみましょう"></a>始めてみましょう</h2><p>以下では、例として Microsoft Intune にデバイスを登録する前に、ユーザーへ再認証による ID 確認を要求するシナリオをご紹介します。この機能は、数回のクリックで有効にすることができます。</p><ol><li>新しい条件付きアクセス ポリシーを作成します</li><li>ポリシーに含めるグループとして test を選択します</li><li>「クラウド アプリまたは操作」で 「Microsoft Intune enrollment」を選択します</li><li>任意で他の条件を選択します </li><li>「許可」で「多要素認証を要求する」を選択します </li><li>「セッション」で「サインインの頻度」を「毎回」に設定します</li><li>ポリシーを有効化し、保存します</li></ol><p>「test」グループのユーザーは、Microsoft Intune にデバイスを登録する際、その前の 5 分以内に再認証を行なっていなかった場合は、再認証が必要となる動作となります。</p><p><img src="/blog/azure-active-directory/new-require-reauthentication-for-intune-enrollment-or-risk/image01.jpg"></p><p>これらのポリシーがユーザーに与える影響を事前に確認するために、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/concept-conditional-access-report-only">レポート専用モード</a> で各ポリシーを確認し、その後にすべてのユーザーに対してポリシーを有効に設定ください。</p><h2 id="今後について"><a href="#今後について" class="headerlink" title="今後について"></a>今後について</h2><p>今回発表したパブリック プレビュー機能によって、高リスクのシナリオに対してもセキュリティを向上させることができると期待しています。このリリースは、パスワードレス認証を使用しているエンド ユーザーに対しても素晴らしいユーザー体験を提供しますが、今後さらに機能を拡張していく予定です。エンド ユーザー向けの資格情報の機能拡張や、VPN アクセスの保護、PIM の昇格など、新しい再認証のシナリオについても今後の発表にご期待ください。また、皆様からのご意見、ご感想、ご提案もお待ちしております。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 10 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ゼロ トラスト基盤を支える API ファーストなソリューションの構築</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/building-api-first-solutions-that-aid-modern-zero-trust/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/building-api-first-solutions-that-aid-modern-zero-trust/</id>
    <published>2022-05-21T15:00:00.000Z</published>
    <updated>2022-08-15T12:46:19.066Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 5 月 17 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/building-api-first-solutions-that-aid-modern-zero-trust/ba-p/2810641">Building API-first solutions that aid modern Zero Trust infrastructure</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>こんにちは。</p><p>マイクロソフトの ID とネットワーク アクセスのプログラム マネジメント担当副社長の Sue Bohn と申します。この Voice of the ISV のブログ記事では、SentinelOne 社のプロダクト マーケティング マネージャーの Jeremy Goldstein とプロダクト マネジメント担当ディレクターの David Baldwin より、SentinelOne が生み出した API ファースト開発モデルによって、<a href="https://www.sentinelone.com/platform">Singularity XDR</a> と <a href="https://www.microsoft.com/security/business/identity-access-management/azure-active-directory">Azure Active Directory</a> が如何に連携し、大量のアラートの管理とセキュリティ ツール間のプロセス統合という課題を解決したかを解説します。</p><hr><p>セキュリティ運用部門における最大の悩みの種は、大量のアラートと CTRL-C/CTRL-V の (コピー アンド ペーストに基づく) 業務フローと言われています。あるセキュリティ ツールで生成された情報を別のツールにコピー アンド ペーストして手動で連携することは、単調な繰り返し作業になり時間もかかるため、攻撃者に常に先手を取らせてしまうことになります。平均的なセキュリティ運用部門では、さまざまなベンダーが提供する数十種類のツールを使用していることを考えると、自動化と相互運用性の必要性は明らかです。SentinelOne は、組織が <a href="https://www.microsoft.com/security/business/zero-trust">ゼロ トラスト</a> の原則 (明示的な検証、最小特権アクセスの使用、侵入の想定) を採用するよう支援しているセキュリティ プロバイダーとして、Microsoft や他のセキュリティ専門家と協力して、これらのニーズに対応しています。</p><p><a href="https://www.microsoft.com/security/business/identity-access-management/azure-active-directory">Azure Active Directory</a> (Azure AD) と連携し、AI と自動化でリアルタイムに改善策を実行する SentinelOne <a href="https://www.sentinelone.com/platform">Singularity XDR</a> などのソリューションを作るため、SentinelOne は API ファーストの開発モデルを採用しています。画面デザインの前に、API として機能を作成するのです。この取り組みにより、顧客やパートナーは弊社とより円滑に連携することが可能となります。Microsoft が当社の Extended Detection Response (XDR) プラットフォームに関連する新しい API をリリースしたときも、同じことが当てはまります。これにより、弊社は有益な新機能を最短期間でお客様に提供することが可能です。Azure AD のすべての危険なユーザーへプログラム的にアクセスできるようにする <a href="https://docs.microsoft.com/graph/api/resources/riskyuser">riskyUser API</a> は、API ファースト戦略の利点の典型的な例です。</p><p>Azure AD Identity Protection は、疑わしいと判別されたアカウント関連の動作を含む多くの要因を考慮して危険なユーザーを検出します。ユーザーとサインインの両方に紐づいたリスク検出を元に、ユーザー全体のリスク スコアが計算され、<a href="https://docs.microsoft.com/azure/active-directory/identity-protection/concept-identity-protection-risks">Risky Users レポート</a> が生成されます。Azure AD の Identity Protection の詳細は <a href="https://docs.microsoft.com/azure/active-directory/identity-protection/overview-identity-protection">こちら</a> をご覧ください。</p><h2 id="顧客が必要とするサービスを顧客が期待するよりも早く提供する"><a href="#顧客が必要とするサービスを顧客が期待するよりも早く提供する" class="headerlink" title="顧客が必要とするサービスを顧客が期待するよりも早く提供する"></a>顧客が必要とするサービスを顧客が期待するよりも早く提供する</h2><p>Microsoft が riskyUser API と、それに付随する confirmCompromised API (Azure AD でユーザーを高リスクとしてマークする) をリリースした際、お客様側での手作業をなくすことが可能ではないかということに気づきました。これらの新しい API を使用すると、ユーザーのリスク スコアと侵害済みの状態を自動的に調整でき、その結果、お客様が選択した <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/">条件付きアクセス</a> のパラメータに波及して、そのユーザーのアクセスが制限されます。この後、SentinelOne が自動的に生成されたインシデント ノートにそのユーザーの新しいリスク状態を追加します。</p><p>API がどのように機能するかの例として、ここでは私が自分のノート PC にマルウェアを仕込んだと仮定します。悪意のある攻撃者からすると、すでに私の ID は非常に簡単に侵害できる状態になっています。私のノート PC (エンドポイント) が侵害された場合、私の資格情報および私のノート PC (エンドポイント) を共有するすべての人の資格情報も侵害されていると想定することが必要です。このように ID が侵害されると、悪意のある攻撃者は私の組織とその内部データへより広範囲にアクセス可能となります。そこで、自動化されたリスク管理の出番です。Singularity XDR は、私のマシンからマルウェアが検出され、私のアカウントが危険にさらされていることを riskyUser API を介して Azure AD に瞬時に通知します。そして、私の組織内で定義およびカスタマイズされた <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-identity-protection-remediate-unblock">修復アクション</a> が自動的に実行されます。</p><p>当社のアジャイル開発手法に加え、この Microsoft の新しい API は非常に利用しやすいことから、riskyUser API の機能を知ってからわずか 3 週間で非常に堅実な POC (Proof of concept) を完了させることができました。この POC では、セキュリティ ツール間のコピー アンド ペーストによる手作業でのデータ入力を、1 件あたり 5 ～ 10 分短縮することができました。大企業では 1 日に何十回も繰り返す作業ですから、これは大きな節約になります。さらに、これらのアクションはリアルタイムで自動化されているため、このシステムを導入している企業は、特に洗練された攻撃者にも対応することが可能です。私たちのお客様は、セキュリティ運用部門の生産性に加えて、普段のセキュリティでも多くの利益を得ています。</p><h2 id="相互運用と自動化により-Zero-Trust-の原則が簡単に採用可能に"><a href="#相互運用と自動化により-Zero-Trust-の原則が簡単に採用可能に" class="headerlink" title="相互運用と自動化により Zero Trust の原則が簡単に採用可能に"></a>相互運用と自動化により Zero Trust の原則が簡単に採用可能に</h2><p>特に、Zero Trust の道のり初期段階にある顧客にとって、私たちが riskyUser API と confirmCompromised API で実現したような相互運用は、その効果以上のものがあります。確かに、これらの組織では、脅威が検出されると、侵害されたユーザー ID の動作が制御されるという直接的な利益を得ることができますが、ゼロ トラストの原則に対する信頼も増していきます。</p><p>これにより、条件付きアクセスに加え、Azure AD と統合された普段の業務アプリや SaaS アプリケーション全体にゼロ トラストの原則をさらに拡大することについて、より幅広い話し合いの扉が開かれることになるのです。例えば、明示的な検証では、アクセス可否の決定には、その妥当性を判断するために複数の入力データが必要です。ユーザーの実際の ID と同様に、侵害されたエンドポイントも容易に特定が可能となります。必要最小限の特権アクセスを使用することで、仮に資格情報が乗っ取られても、組織のシステムがさらに侵害されることを防ぐことができます。これにより、攻撃者が頻繁に標的とする「Super admin」アクセス権が利用されるのを防ぐことができます。侵害を想定するという観点では、潜在的な侵害が発生するのを待ってから資格情報に頼ったアクセスを強化するのではなく、既定でアクセスを禁止することで、潜在的な攻撃対象領域を減らすことができます。</p><p>Azure AD と Singularity XDR のような最高の組み合わせのソリューションをお客様が利用できるようになれば、それは大変喜ばしいことです。リアルタイムでのゼロ トラスト実装を機能させるためには、API ファーストの開発が生み出す相互運用性に注目する必要があります。だからこそ、Microsoft と足並みを揃えて、ゼロ トラストを採用する際の柔軟性、統合性、選択肢を生み出すことが私たちの理念なのです。</p><p>データ セキュリティの業界では、人材が圧倒的に不足しています。自動化、特に複数のプロバイダーのツールにまたがる自動化は、あらゆる規模のセキュリティ組織が人的資源を最大限に活用するために有効です。これにより組織全体のセキュリティも向上させます。SentinelOne では、Microsoft のようなセキュリティ ソリューション プロバイダーと協力して、あらゆる規模の組織がゼロ トラスト セキュリティの取り組みを始められるようにし、すべての人に利益をもたらすという共通の目標に取り組んでいます。</p><p><a href="https://www.sentinelone.com/">SentinelOne</a> の詳細については、<a href="https://twitter.com/SentinelOne">Twitter</a>、<a href="https://www.facebook.com/SentinelOne">Facebook</a>、<a href="https://www.youtube.com/c/Sentinelone-inc">YouTube</a>、<a href="https://www.linkedin.com/company/sentinelone">LinkedIn</a> でご確認ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 17 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
</feed>
